{"ast":null,"code":"import{useState,useEffect,useCallback,useMemo}from\"react\";import styles from\"../styles/pages/Details.module.css\";import Box from\"@mui/material/Box\";import InputLabel from\"@mui/material/InputLabel\";import MenuItem from\"@mui/material/MenuItem\";import FormControl from\"@mui/material/FormControl\";import Select from\"@mui/material/Select\";import delivery from\"../images/delivery.png\";import cartImg from\"../images/cart1.png\";import{useLocation,useParams}from\"react-router-dom\";import{getProductById,getRelatedProducts}from\"../utils/apiCalls\";import Loader from\"../components/Loader\";import{useDispatch}from\"react-redux\";import{Swiper,SwiperSlide}from\"swiper/react\";import\"swiper/css\";import\"swiper/css/pagination\";import\"swiper/css/navigation\";import{Autoplay,Pagination}from\"swiper/modules\";import{toast}from\"react-toastify\";import SingleProductModal from\"../components/singleProduct/SingleProductModal.jsx\";import SwiperComponent from\"../components/Swiper.jsx\";import{CircularProgress,Stack,Typography}from\"@mui/material\";import Empty from\"./empty.jsx\";import HandleMessageIsAuth from\"../utils/message/index.js\";import WishlistProductDetails from\"../components/singleProduct/WishlistProductDetails.jsx\";import{useAddToCartMutation,useGetAllCartsQuery}from\"../Redux/cartApi.jsx\";import{calcDiscount,notifyError,notifySuccess}from\"../utils/general.js\";import{Add,AddCircle,Minus,ShoppingCart}from\"iconsax-react\";import Police from\"../components/singleProduct/Police.jsx\";import{format}from\"date-fns\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Details(){var _productDetails$varia,_newVariants$,_newVariants$$values,_newVariants$2,_newVariants$3,_newVariants$3$values,_newVariants$4,_newVariants$6,_newVariants$6$values,_newVariants$filter,_productDetails$varia3;console.log(\"details component rendered\");const currentDate=new Date();const startDate=new Date(currentDate);startDate.setDate(currentDate.getDate()+10);const endDate=new Date(currentDate);endDate.setDate(currentDate.getDate()+14);const formattedStartDate=format(startDate,\"dd MMMM\");const formattedEndDate=format(endDate,\"dd MMMM\");const{id}=useParams();const{pathname}=useLocation();useEffect(()=>{window.scrollTo({top:0,behavior:\"smooth\"});},[pathname,id]);const transformVariants=useCallback(variants=>{const optionsMap={};variants===null||variants===void 0?void 0:variants.forEach(variant=>{var _variant$options;variant===null||variant===void 0?void 0:(_variant$options=variant.options)===null||_variant$options===void 0?void 0:_variant$options.forEach(option=>{const{name}=option.option||{};const{value}=option.value||{};if(!optionsMap[name]){optionsMap[name]=new Set();}optionsMap[name].add(value);});});const newVariants=Object.entries(optionsMap).map(_ref=>{let[name,values]=_ref;return{name,values:Array.from(values)};});return newVariants;},[]);const[productDetails,setProductDetails]=useState({});const[largeImage,setLargeImage]=useState(\"\");const[counter,setCounter]=useState(1);const[variant,setVariant]=useState({});const[open,setOpen]=useState(false);const[relatedProducts,setRelatedProducts]=useState([]);const[reload,setReload]=useState(false);const[loading,setLoading]=useState(true);const{data:cartData}=useGetAllCartsQuery();const cartItems=(cartData===null||cartData===void 0?void 0:cartData.data)||[];const[addToCart,{isLoading:CartAddLoad,isSuccess:isSuccessAddCart,isError:isErrorAddCart,data:addToCartData,// Contains the response from the mutation if successful\nerror:addCartError// Capture the error object\n}]=useAddToCartMutation();const handleAddToCart=async item=>{try{const response=await addToCart(item).unwrap();// Unwrap to handle promise rejection\nif((response===null||response===void 0?void 0:response.status)===\"success\"){const message=`Added ${productDetails===null||productDetails===void 0?void 0:productDetails.name} to cart!`;notifySuccess(message);}if((response===null||response===void 0?void 0:response.status)!==\"success\"){var _addCartError$data;const errorMessage=(addCartError===null||addCartError===void 0?void 0:(_addCartError$data=addCartError.data)===null||_addCartError$data===void 0?void 0:_addCartError$data.message)||\"Failed to add to cart\";notifyError(errorMessage);}}catch(error){if(isErrorAddCart){var _addCartError$data2;const errorMessage=(addCartError===null||addCartError===void 0?void 0:(_addCartError$data2=addCartError.data)===null||_addCartError$data2===void 0?void 0:_addCartError$data2.message)||\"Failed to add to cart\";notifyError(errorMessage);}}};const handleChange=_ref2=>{let{key,value}=_ref2;setVariant(prev=>({...prev,[key]:value}));console.log(key,value,\"variantvariantvariantvariant\",variant);};const handleImageChange=e=>{var _productDetails$image;const clickedImage=e.target.src;setLargeImage(clickedImage);const clonedSmallImages=[...(productDetails===null||productDetails===void 0?void 0:(_productDetails$image=productDetails.images)===null||_productDetails$image===void 0?void 0:_productDetails$image.slice(0,4))];const indexOfImageToReplace=clonedSmallImages.indexOf(clickedImage);if(indexOfImageToReplace!==-1){clonedSmallImages[indexOfImageToReplace]=largeImage;// Output the updated array\nconsole.log(\"Updated Array:\",clonedSmallImages);console.log(\"Index of Replaced Item:\",indexOfImageToReplace);}else{console.log(\"Item not found in the array.\");}};useEffect(()=>{getProductById(id).then(res=>{setProductDetails(res);setLargeImage(res===null||res===void 0?void 0:res.images[0]);});getRelatedProducts(id).then(res=>{setRelatedProducts(res);setLoading(false);}).catch(err=>{setLoading(false);});},[reload]);const newVariants=useMemo(()=>transformVariants(productDetails===null||productDetails===void 0?void 0:productDetails.variants)||[],[productDetails===null||productDetails===void 0?void 0:productDetails.variants,transformVariants]);const selectedVariantObject=(productDetails===null||productDetails===void 0?void 0:productDetails.variants)&&(productDetails===null||productDetails===void 0?void 0:(_productDetails$varia=productDetails.variants)===null||_productDetails$varia===void 0?void 0:_productDetails$varia.find(variantItem=>variantItem.options.every(option=>{var _option$option,_option$value;return variant[option===null||option===void 0?void 0:(_option$option=option.option)===null||_option$option===void 0?void 0:_option$option.name]===(option===null||option===void 0?void 0:(_option$value=option.value)===null||_option$value===void 0?void 0:_option$value.value);})));console.log(\"selectedVariantObject\",selectedVariantObject);useEffect(()=>{if(newVariants!==null&&newVariants!==void 0&&newVariants.length){newVariants.forEach(VariantItem=>{var _VariantItem$values;if(VariantItem!==null&&VariantItem!==void 0&&VariantItem.name&&VariantItem!==null&&VariantItem!==void 0&&(_VariantItem$values=VariantItem.values)!==null&&_VariantItem$values!==void 0&&_VariantItem$values[0]){handleChange({key:VariantItem.name,value:VariantItem.values[0]});}});}},[newVariants]);// useEffect(() => {\n//   selectedVariantObject?.gallery?.[0]\n//     ? setLargeImage(selectedVariantObject?.gallery?.[0])\n//     : setLargeImage(productDetails?.images?.[0]);\n// }, [selectedVariantObject]);\n// Example usage\nconst finalPrice=calcDiscount(selectedVariantObject,productDetails);return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{open:true}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"500px\"}})]}),!productDetails&&/*#__PURE__*/_jsx(Empty,{title:\"Product not Found\",message:\"Seems there is a problem finding this product\"}),(productDetails===null||productDetails===void 0?void 0:productDetails.id)&&/*#__PURE__*/_jsxs(\"div\",{className:`${styles[\"container\"]} padding-container section-top-margin section-bottom-margin`,children:[/*#__PURE__*/_jsxs(Box,{component:\"div\",sx:{display:{sm:\"flex\",xs:\"none\"}},className:styles[\"images-section\"],children:[/*#__PURE__*/_jsx(\"img\",{src:largeImage,className:styles[\"large-image\"]}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"small-images-container\"],children:productDetails.images.slice(0,4).map((img,index)=>/*#__PURE__*/_jsx(\"img\",{alt:\"small-imge\",src:img,className:styles[\"small-image\"],onClick:e=>{handleImageChange(e);}},index))})]}),/*#__PURE__*/_jsx(Box,{sx:{display:{xs:\"block\",sm:\"none\"},aspectRatio:0.8,position:\"relative\",width:\"98vw\"},children:/*#__PURE__*/_jsx(Swiper,{className:\"mySwiper\",grabCursor:true,pagination:{clickable:true},speed:2000,loop:true,autoplay:{delay:2000,disableOnInteraction:false},modules:[Autoplay,Pagination],children:productDetails.images.slice(0,4).map((img,index)=>/*#__PURE__*/_jsx(SwiperSlide,{children:/*#__PURE__*/_jsx(Box,{component:\"div\",sx:{backgroundImage:`url(${img})`,backgroundSize:\"cover\",backgroundPosition:\"center\",backgroundRepeat:\"no-repeat\",display:\"flex\",aspectRatio:0.8,justifyContent:\"center\",alignItems:\"center\"}})},index))})}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"order-section\"],children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"14px\",color:\"var(--rhine-castle)\"},children:productDetails.category.name}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"36px\",color:\"var(--errie-black)\"},children:productDetails===null||productDetails===void 0?void 0:productDetails.name}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"24px\",fontWeight:\"700\",color:\"var(--errie-black)\"},children:finalPrice!==null&&finalPrice!==void 0&&finalPrice.discount?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"EGP \",finalPrice.priceAfter]}),\" \",/*#__PURE__*/_jsxs(\"s\",{style:{fontSize:\"1.25rem\",fontWeight:\"500\",color:\"var(--grey-text)\"},children:[\"EGP \",finalPrice.price,\" \"]})]}):/*#__PURE__*/_jsxs(\"span\",{children:[\"EGP \",finalPrice.price]})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"14px\",fontWeight:\"500\",color:\"var(--placeholder-text)\"},children:\"Tax included shipping calculated at checkout\"}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"line\"]}),/*#__PURE__*/_jsx(Box,{sx:{minWidth:120,\"& .MuiFormControl-root\":{m:0}},children:newVariants!==null&&newVariants!==void 0&&newVariants[0]&&newVariants!==null&&newVariants!==void 0&&(_newVariants$=newVariants[0])!==null&&_newVariants$!==void 0&&(_newVariants$$values=_newVariants$.values)!==null&&_newVariants$$values!==void 0&&_newVariants$$values.length?/*#__PURE__*/_jsxs(FormControl,{sx:{width:\"100%\"},size:\"small\",children:[/*#__PURE__*/_jsxs(InputLabel,{id:\"demo-simple-select-label\",children:[\"Select \",newVariants===null||newVariants===void 0?void 0:(_newVariants$2=newVariants[0])===null||_newVariants$2===void 0?void 0:_newVariants$2.name]}),/*#__PURE__*/_jsx(Select,{className:styles[\"select\"],sx:{width:\"100%\",\".Mui-focused .MuiSelect-select \":{borderColor:\"#ad6b46\",color:\"#ad6b46\"}},labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",defaultValue:(newVariants===null||newVariants===void 0?void 0:(_newVariants$3=newVariants[0])===null||_newVariants$3===void 0?void 0:(_newVariants$3$values=_newVariants$3.values)===null||_newVariants$3$values===void 0?void 0:_newVariants$3$values[0])||0,value:(variant===null||variant===void 0?void 0:variant[newVariants===null||newVariants===void 0?void 0:(_newVariants$4=newVariants[0])===null||_newVariants$4===void 0?void 0:_newVariants$4.name])||0,label:\"Select Size\",onChange:event=>{var _newVariants$5;return handleChange({key:newVariants===null||newVariants===void 0?void 0:(_newVariants$5=newVariants[0])===null||_newVariants$5===void 0?void 0:_newVariants$5.name,value:event.target.value});},children:newVariants===null||newVariants===void 0?void 0:(_newVariants$6=newVariants[0])===null||_newVariants$6===void 0?void 0:(_newVariants$6$values=_newVariants$6.values)===null||_newVariants$6$values===void 0?void 0:_newVariants$6$values.map((variant,index)=>/*#__PURE__*/_jsx(MenuItem,{value:variant,children:variant},index))})]}):null}),(newVariants===null||newVariants===void 0?void 0:newVariants.length)>1?newVariants===null||newVariants===void 0?void 0:(_newVariants$filter=newVariants.filter((item,index)=>{var _item$values;return((_item$values=item.values)===null||_item$values===void 0?void 0:_item$values.length)&&index!==0;}))===null||_newVariants$filter===void 0?void 0:_newVariants$filter.map((variantItem,index)=>{var _variantItem$values;return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(\"h1\",{style:{marginBottom:\"12px\"},children:[variantItem===null||variantItem===void 0?void 0:variantItem.name,\" :\"]}),/*#__PURE__*/_jsx(Stack,{direction:\"row\",gap:\"12px\",children:variantItem===null||variantItem===void 0?void 0:(_variantItem$values=variantItem.values)===null||_variantItem$values===void 0?void 0:_variantItem$values.map((ValueVariant,index)=>{var _productDetails$varia2;// Find the variant that matches the current ValueVariant\nconst matchingVariant=productDetails===null||productDetails===void 0?void 0:(_productDetails$varia2=productDetails.variants)===null||_productDetails$varia2===void 0?void 0:_productDetails$varia2.filter(variant=>variant===null||variant===void 0?void 0:variant.options.some(option=>{var _option$option2,_option$value2;return(variantItem===null||variantItem===void 0?void 0:variantItem.name)==(option===null||option===void 0?void 0:(_option$option2=option.option)===null||_option$option2===void 0?void 0:_option$option2.name)&&ValueVariant==(option===null||option===void 0?void 0:(_option$value2=option.value)===null||_option$value2===void 0?void 0:_option$value2.value);}));const isAvailable=matchingVariant===null||matchingVariant===void 0?void 0:matchingVariant.some(item=>item.options.some(option=>{var _newVariants$7,_option$option3,_newVariants$8,_option$value3;return(newVariants===null||newVariants===void 0?void 0:(_newVariants$7=newVariants[0])===null||_newVariants$7===void 0?void 0:_newVariants$7.name)==(option===null||option===void 0?void 0:(_option$option3=option.option)===null||_option$option3===void 0?void 0:_option$option3.name)&&(variant===null||variant===void 0?void 0:variant[newVariants===null||newVariants===void 0?void 0:(_newVariants$8=newVariants[0])===null||_newVariants$8===void 0?void 0:_newVariants$8.name])==(option===null||option===void 0?void 0:(_option$value3=option.value)===null||_option$value3===void 0?void 0:_option$value3.value);})&&(item===null||item===void 0?void 0:item.stock)!=0);// Check if the matching variant is in stock\nreturn/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleChange({key:variantItem===null||variantItem===void 0?void 0:variantItem.name,value:ValueVariant}),className:styles[\"color\"],style:{marginLeft:\"6px\",padding:\"4px 12px\",borderRadius:\"8px\",opacity:isAvailable?1:0.7,textDecoration:isAvailable?\"none\":\"line-through\",backgroundColor:(variant===null||variant===void 0?void 0:variant[variantItem===null||variantItem===void 0?void 0:variantItem.name])===ValueVariant?\"var(--brown)\":isAvailable?\"white\":\"#9f9f9f99\",color:(variant===null||variant===void 0?void 0:variant[variantItem===null||variantItem===void 0?void 0:variantItem.name])===ValueVariant?\"white\":\"var(--rhine-castle)\",border:(variant===null||variant===void 0?void 0:variant[variantItem===null||variantItem===void 0?void 0:variantItem.name])===ValueVariant?\"2px solid var(--brown)\":\"1px solid black\",cursor:isAvailable?\"pointer\":\"not-allowed\"},children:ValueVariant},index+ValueVariant);})})]},variantItem===null||variantItem===void 0?void 0:variantItem.name);}):null,/*#__PURE__*/_jsx(\"div\",{className:styles[\"row\"],children:selectedVariantObject?selectedVariantObject.stock>10?null:/*#__PURE__*/_jsx(\"span\",{style:{color:\"orange\"},children:\" \"}):/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:\" out of stock \"})}),/*#__PURE__*/_jsxs(\"div\",{className:`${styles[\"row\"]} ${styles[\"btns-action\"]}`,children:[/*#__PURE__*/_jsxs(Box,{className:`${styles[\"row\"]} ${styles[\"btn-count\"]}`,sx:{padding:{xs:\"8px 4px\",sm:\"13px 8px\"},border:\"1px solid var(--unicorn-silver)\",borderRadius:\"10px\",justifyContent:\"space-between\",alignItems:\"center\",flexWrap:\"nowrap\"},children:[/*#__PURE__*/_jsx(Minus,{onClick:()=>{if(counter>1){setCounter(prev=>prev-1);}},style:{cursor:\"pointer\"},size:\"20\",variant:\"Outline\",color:\"#1B1B1B\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"1rem\",fontWeight:\"600\"},children:counter}),/*#__PURE__*/_jsx(Add,{onClick:()=>{setCounter(prev=>prev+1);},style:{cursor:\"pointer\"},size:\"20\",variant:\"Outline\",color:\"#1B1B1B\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:styles[\"cart-button\"],style:{opacity:counter<1?\".3\":\"1\",pointerEvents:counter<1?\"none\":\"initial\"},disabled:CartAddLoad||(selectedVariantObject===null||selectedVariantObject===void 0?void 0:selectedVariantObject.stock)==0||!selectedVariantObject||(productDetails===null||productDetails===void 0?void 0:(_productDetails$varia3=productDetails.variants)===null||_productDetails$varia3===void 0?void 0:_productDetails$varia3.length)<1||counter<1||counter>(selectedVariantObject===null||selectedVariantObject===void 0?void 0:selectedVariantObject.stock),onClick:e=>{e.stopPropagation();if(counter>(selectedVariantObject===null||selectedVariantObject===void 0?void 0:selectedVariantObject.stock)){toast.error(\"Out of stock\");return;}let itemForCart=cartItems===null||cartItems===void 0?void 0:cartItems.find(cartItem=>{var _cartItem$variant;return(cartItem===null||cartItem===void 0?void 0:cartItem.product.id)==+id&&(cartItem===null||cartItem===void 0?void 0:(_cartItem$variant=cartItem.variant)===null||_cartItem$variant===void 0?void 0:_cartItem$variant.id)==(selectedVariantObject===null||selectedVariantObject===void 0?void 0:selectedVariantObject.id);});let newCount=itemForCart?Math.trunc(counter-itemForCart.count):counter;if(newCount===0)return toast.error(\"please change count\");HandleMessageIsAuth(()=>{handleAddToCart([{product:+id,count:newCount,variant:selectedVariantObject===null||selectedVariantObject===void 0?void 0:selectedVariantObject.id}]);setOpen(true);});},children:[/*#__PURE__*/_jsx(ShoppingCart,{size:\"24\",color:\"#FFF\"}),CartAddLoad?/*#__PURE__*/_jsxs(Stack,{direction:\"row\",justifyContent:\"center\",gap:2,alignItems:\"center\",children:[\" \",/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\",size:\"1rem\",sx:{width:\"12px\"}}),\" \",\"Loading\"]}):/*#__PURE__*/_jsx(\"span\",{children:\"Add to cart\"})]}),/*#__PURE__*/_jsx(SingleProductModal,{open:open,handleClose:setOpen,productDetails:productDetails,cartItems:cartItems,selectedVariantObject:selectedVariantObject}),/*#__PURE__*/_jsx(WishlistProductDetails,{id:+id})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"16px\",fontWeight:\"600\",color:\"var(--errie-black)\"},children:\"Description\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"14px\",fontWeight:\"500\",color:\"var(--placeholder-text)\"},children:productDetails.description}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"10px\",margin:\"12px 0px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:delivery,className:styles[\"delivery-icon\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Delivery details\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Door delivery between \",formattedStartDate,\" and\",\" \",formattedEndDate]})]})]})]})]}),/*#__PURE__*/_jsx(Police,{}),/*#__PURE__*/_jsxs(Box,{sx:{mx:{xs:\"20px\",md:\"40px\",lg:\"150px\"},mb:{xs:\"120px\",md:\"140px\",lg:\"160px\"}},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{marginLeft:{xs:\"5px\",md:\"10px\",lg:\"0px\"},marginBottom:\"16px\",fontWeight:\"400\",fontSize:{xs:\"24px\",md:\"32px\",lg:\"40px\"}},children:\"You may also like\"}),/*#__PURE__*/_jsx(SwiperComponent,{setReload:setReload,items:relatedProducts})]})]});}","map":{"version":3,"names":["useState","useEffect","useCallback","useMemo","styles","Box","InputLabel","MenuItem","FormControl","Select","delivery","cartImg","useLocation","useParams","getProductById","getRelatedProducts","Loader","useDispatch","Swiper","SwiperSlide","Autoplay","Pagination","toast","SingleProductModal","SwiperComponent","CircularProgress","Stack","Typography","Empty","HandleMessageIsAuth","WishlistProductDetails","useAddToCartMutation","useGetAllCartsQuery","calcDiscount","notifyError","notifySuccess","Add","AddCircle","Minus","ShoppingCart","Police","format","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Details","_productDetails$varia","_newVariants$","_newVariants$$values","_newVariants$2","_newVariants$3","_newVariants$3$values","_newVariants$4","_newVariants$6","_newVariants$6$values","_newVariants$filter","_productDetails$varia3","console","log","currentDate","Date","startDate","setDate","getDate","endDate","formattedStartDate","formattedEndDate","id","pathname","window","scrollTo","top","behavior","transformVariants","variants","optionsMap","forEach","variant","_variant$options","options","option","name","value","Set","add","newVariants","Object","entries","map","_ref","values","Array","from","productDetails","setProductDetails","largeImage","setLargeImage","counter","setCounter","setVariant","open","setOpen","relatedProducts","setRelatedProducts","reload","setReload","loading","setLoading","data","cartData","cartItems","addToCart","isLoading","CartAddLoad","isSuccess","isSuccessAddCart","isError","isErrorAddCart","addToCartData","error","addCartError","handleAddToCart","item","response","unwrap","status","message","_addCartError$data","errorMessage","_addCartError$data2","handleChange","_ref2","key","prev","handleImageChange","e","_productDetails$image","clickedImage","target","src","clonedSmallImages","images","slice","indexOfImageToReplace","indexOf","then","res","catch","err","selectedVariantObject","find","variantItem","every","_option$option","_option$value","length","VariantItem","_VariantItem$values","finalPrice","children","style","height","title","className","component","sx","display","sm","xs","img","index","alt","onClick","aspectRatio","position","width","grabCursor","pagination","clickable","speed","loop","autoplay","delay","disableOnInteraction","modules","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","justifyContent","alignItems","fontSize","color","category","fontWeight","discount","priceAfter","price","minWidth","m","size","borderColor","labelId","defaultValue","label","onChange","event","_newVariants$5","filter","_item$values","_variantItem$values","marginBottom","direction","gap","ValueVariant","_productDetails$varia2","matchingVariant","some","_option$option2","_option$value2","isAvailable","_newVariants$7","_option$option3","_newVariants$8","_option$value3","stock","marginLeft","padding","borderRadius","opacity","textDecoration","backgroundColor","border","cursor","flexWrap","pointerEvents","disabled","stopPropagation","itemForCart","cartItem","_cartItem$variant","product","newCount","Math","trunc","count","handleClose","description","margin","mx","md","lg","mb","items"],"sources":["/var/www/production/portal/src/pages/Details.jsx"],"sourcesContent":["import { useState, useEffect, useCallback, useMemo } from \"react\";\nimport styles from \"../styles/pages/Details.module.css\";\nimport Box from \"@mui/material/Box\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport delivery from \"../images/delivery.png\";\nimport cartImg from \"../images/cart1.png\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport { getProductById, getRelatedProducts } from \"../utils/apiCalls\";\nimport Loader from \"../components/Loader\";\nimport { useDispatch } from \"react-redux\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport \"swiper/css\";\nimport \"swiper/css/pagination\";\nimport \"swiper/css/navigation\";\nimport { Autoplay, Pagination } from \"swiper/modules\";\nimport { toast } from \"react-toastify\";\nimport SingleProductModal from \"../components/singleProduct/SingleProductModal.jsx\";\n\nimport SwiperComponent from \"../components/Swiper.jsx\";\nimport { CircularProgress, Stack, Typography } from \"@mui/material\";\nimport Empty from \"./empty.jsx\";\nimport HandleMessageIsAuth from \"../utils/message/index.js\";\nimport WishlistProductDetails from \"../components/singleProduct/WishlistProductDetails.jsx\";\nimport {\n  useAddToCartMutation,\n  useGetAllCartsQuery,\n} from \"../Redux/cartApi.jsx\";\nimport { calcDiscount, notifyError, notifySuccess } from \"../utils/general.js\";\nimport { Add, AddCircle, Minus, ShoppingCart } from \"iconsax-react\";\nimport Police from \"../components/singleProduct/Police.jsx\";\nimport { format } from \"date-fns\";\nexport default function Details() {\n  console.log(\"details component rendered\");\n  const currentDate = new Date();\n  const startDate = new Date(currentDate);\n  startDate.setDate(currentDate.getDate() + 10);\n  const endDate = new Date(currentDate);\n  endDate.setDate(currentDate.getDate() + 14);\n\n  const formattedStartDate = format(startDate, \"dd MMMM\");\n  const formattedEndDate = format(endDate, \"dd MMMM\");\n  const { id } = useParams();\n  const { pathname } = useLocation();\n  useEffect(() => {\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\",\n    });\n  }, [pathname, id]);\n  const transformVariants = useCallback((variants) => {\n    const optionsMap = {};\n\n    variants?.forEach((variant) => {\n      variant?.options?.forEach((option) => {\n        const { name } = option.option || {};\n        const { value } = option.value || {};\n\n        if (!optionsMap[name]) {\n          optionsMap[name] = new Set();\n        }\n\n        optionsMap[name].add(value);\n      });\n    });\n\n    const newVariants = Object.entries(optionsMap).map(([name, values]) => ({\n      name,\n      values: Array.from(values),\n    }));\n\n    return newVariants;\n  }, []);\n\n  const [productDetails, setProductDetails] = useState({});\n\n  const [largeImage, setLargeImage] = useState(\"\");\n\n  const [counter, setCounter] = useState(1);\n  const [variant, setVariant] = useState({});\n  const [open, setOpen] = useState(false);\n  const [relatedProducts, setRelatedProducts] = useState([]);\n  const [reload, setReload] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const { data: cartData } = useGetAllCartsQuery();\n  const cartItems = cartData?.data || [];\n  const [\n    addToCart,\n    {\n      isLoading: CartAddLoad,\n      isSuccess: isSuccessAddCart,\n      isError: isErrorAddCart,\n      data: addToCartData, // Contains the response from the mutation if successful\n      error: addCartError, // Capture the error object\n    },\n  ] = useAddToCartMutation();\n  const handleAddToCart = async (item) => {\n    try {\n      const response = await addToCart(item).unwrap(); // Unwrap to handle promise rejection\n\n      if (response?.status === \"success\") {\n        const message = `Added ${productDetails?.name} to cart!`;\n        notifySuccess(message);\n      }\n      if (response?.status !== \"success\") {\n        const errorMessage =\n          addCartError?.data?.message || \"Failed to add to cart\";\n        notifyError(errorMessage);\n      }\n    } catch (error) {\n      if (isErrorAddCart) {\n        const errorMessage =\n          addCartError?.data?.message || \"Failed to add to cart\";\n        notifyError(errorMessage);\n      }\n    }\n  };\n  const handleChange = ({ key, value }) => {\n    setVariant((prev) => ({ ...prev, [key]: value }));\n    console.log(key, value, \"variantvariantvariantvariant\", variant);\n  };\n\n  const handleImageChange = (e) => {\n    const clickedImage = e.target.src;\n    setLargeImage(clickedImage);\n    const clonedSmallImages = [...productDetails?.images?.slice(0, 4)];\n    const indexOfImageToReplace = clonedSmallImages.indexOf(clickedImage);\n    if (indexOfImageToReplace !== -1) {\n      clonedSmallImages[indexOfImageToReplace] = largeImage;\n      // Output the updated array\n      console.log(\"Updated Array:\", clonedSmallImages);\n      console.log(\"Index of Replaced Item:\", indexOfImageToReplace);\n    } else {\n      console.log(\"Item not found in the array.\");\n    }\n  };\n  useEffect(() => {\n    getProductById(id).then((res) => {\n      setProductDetails(res);\n      setLargeImage(res?.images[0]);\n    });\n\n    getRelatedProducts(id)\n      .then((res) => {\n        setRelatedProducts(res);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setLoading(false);\n      });\n  }, [reload]);\n\n  const newVariants = useMemo(\n    () => transformVariants(productDetails?.variants) || [],\n    [productDetails?.variants, transformVariants]\n  );\n\n  const selectedVariantObject =\n    productDetails?.variants &&\n    productDetails?.variants?.find((variantItem) =>\n      variantItem.options.every(\n        (option) => variant[option?.option?.name] === option?.value?.value\n      )\n    );\n\n  console.log(\"selectedVariantObject\", selectedVariantObject);\n\n  useEffect(() => {\n    if (newVariants?.length) {\n      newVariants.forEach((VariantItem) => {\n        if (VariantItem?.name && VariantItem?.values?.[0]) {\n          handleChange({\n            key: VariantItem.name,\n            value: VariantItem.values[0],\n          });\n        }\n      });\n    }\n  }, [newVariants]);\n  // useEffect(() => {\n  //   selectedVariantObject?.gallery?.[0]\n  //     ? setLargeImage(selectedVariantObject?.gallery?.[0])\n  //     : setLargeImage(productDetails?.images?.[0]);\n  // }, [selectedVariantObject]);\n\n  // Example usage\n  const finalPrice = calcDiscount(selectedVariantObject, productDetails);\n\n  return (\n    <>\n      {loading && (\n        <>\n          <Loader open={true} />\n          <div style={{ height: \"500px\" }} />\n        </>\n      )}\n      {!productDetails && (\n        <Empty\n          title=\"Product not Found\"\n          message=\"Seems there is a problem finding this product\"\n        />\n      )}\n      {productDetails?.id && (\n        <div\n          className={`${styles[\"container\"]} padding-container section-top-margin section-bottom-margin`}\n        >\n          <Box\n            component={\"div\"}\n            sx={{ display: { sm: \"flex\", xs: \"none\" } }}\n            className={styles[\"images-section\"]}\n          >\n            <img src={largeImage} className={styles[\"large-image\"]} />\n            <div className={styles[\"small-images-container\"]}>\n              {productDetails.images.slice(0, 4).map((img, index) => (\n                <img\n                  alt=\"small-imge\"\n                  key={index}\n                  src={img}\n                  className={styles[\"small-image\"]}\n                  onClick={(e) => {\n                    handleImageChange(e);\n                  }}\n                />\n              ))}\n            </div>\n          </Box>\n          <Box\n            sx={{\n              display: { xs: \"block\", sm: \"none\" },\n              aspectRatio: 0.8,\n              position: \"relative\",\n              width: \"98vw\",\n            }}\n          >\n            <Swiper\n              className=\"mySwiper\"\n              grabCursor={true}\n              pagination={{\n                clickable: true,\n              }}\n              speed={2000}\n              loop\n              autoplay={{\n                delay: 2000,\n                disableOnInteraction: false,\n              }}\n              modules={[Autoplay, Pagination]}\n            >\n              {productDetails.images.slice(0, 4).map((img, index) => (\n                <SwiperSlide key={index}>\n                  <Box\n                    component={\"div\"}\n                    sx={{\n                      backgroundImage: `url(${img})`,\n                      backgroundSize: \"cover\",\n                      backgroundPosition: \"center\",\n                      backgroundRepeat: \"no-repeat\",\n\n                      display: \"flex\",\n                      aspectRatio: 0.8,\n                      justifyContent: \"center\",\n                      alignItems: \"center\",\n                    }}\n                  ></Box>\n                </SwiperSlide>\n              ))}\n            </Swiper>\n          </Box>\n          <div className={styles[\"order-section\"]}>\n            <div style={{ fontSize: \"14px\", color: \"var(--rhine-castle)\" }}>\n              {productDetails.category.name}\n            </div>\n            <div style={{ fontSize: \"36px\", color: \"var(--errie-black)\" }}>\n              {productDetails?.name}\n            </div>\n            <div\n              style={{\n                fontSize: \"24px\",\n                fontWeight: \"700\",\n                color: \"var(--errie-black)\",\n              }}\n            >\n              {finalPrice?.discount ? (\n                <>\n                  <span>EGP {finalPrice.priceAfter}</span>{\" \"}\n                  <s\n                    style={{\n                      fontSize: \"1.25rem\",\n                      fontWeight: \"500\",\n                      color: \"var(--grey-text)\",\n                    }}\n                  >\n                    EGP {finalPrice.price}{\" \"}\n                  </s>\n                </>\n              ) : (\n                <span>EGP {finalPrice.price}</span>\n              )}\n            </div>\n            <div\n              style={{\n                fontSize: \"14px\",\n                fontWeight: \"500\",\n                color: \"var(--placeholder-text)\",\n              }}\n            >\n              Tax included shipping calculated at checkout\n            </div>\n            <div className={styles[\"line\"]}></div>\n            <Box\n              sx={{\n                minWidth: 120,\n                \"& .MuiFormControl-root\": {\n                  m: 0,\n                },\n              }}\n            >\n              {newVariants?.[0] && newVariants?.[0]?.values?.length ? (\n                <FormControl sx={{ width: \"100%\" }} size=\"small\">\n                  <InputLabel id=\"demo-simple-select-label\">\n                    Select {newVariants?.[0]?.name}\n                  </InputLabel>\n                  <Select\n                    className={styles[\"select\"]}\n                    sx={{\n                      width: \"100%\",\n                      \".Mui-focused .MuiSelect-select \": {\n                        borderColor: \"#ad6b46\",\n                        color: \"#ad6b46\",\n                      },\n                    }}\n                    labelId=\"demo-simple-select-label\"\n                    id=\"demo-simple-select\"\n                    defaultValue={newVariants?.[0]?.values?.[0] || 0}\n                    value={variant?.[newVariants?.[0]?.name] || 0}\n                    label=\"Select Size\"\n                    onChange={(event) =>\n                      handleChange({\n                        key: newVariants?.[0]?.name,\n                        value: event.target.value,\n                      })\n                    }\n                  >\n                    {newVariants?.[0]?.values?.map((variant, index) => (\n                      <MenuItem key={index} value={variant}>\n                        {variant}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              ) : null}\n            </Box>\n            {newVariants?.length > 1\n              ? newVariants\n                  ?.filter((item, index) => item.values?.length && index !== 0)\n                  ?.map((variantItem, index) => (\n                    <Box key={variantItem?.name}>\n                      <h1 style={{ marginBottom: \"12px\" }}>\n                        {variantItem?.name} :\n                      </h1>\n                      <Stack direction={\"row\"} gap={\"12px\"}>\n                        {variantItem?.values?.map((ValueVariant, index) => {\n                          // Find the variant that matches the current ValueVariant\n                          const matchingVariant =\n                            productDetails?.variants?.filter((variant) =>\n                              variant?.options.some(\n                                (option) =>\n                                  variantItem?.name == option?.option?.name &&\n                                  ValueVariant == option?.value?.value\n                              )\n                            );\n                          const isAvailable = matchingVariant?.some(\n                            (item) =>\n                              item.options.some(\n                                (option) =>\n                                  newVariants?.[0]?.name ==\n                                    option?.option?.name &&\n                                  variant?.[newVariants?.[0]?.name] ==\n                                    option?.value?.value\n                              ) && item?.stock != 0\n                          );\n                          // Check if the matching variant is in stock\n                          return (\n                            <button\n                              onClick={() =>\n                                handleChange({\n                                  key: variantItem?.name,\n                                  value: ValueVariant,\n                                })\n                              }\n                              key={index + ValueVariant}\n                              className={styles[\"color\"]}\n                              style={{\n                                marginLeft: \"6px\",\n                                padding: \"4px 12px\",\n                                borderRadius: \"8px\",\n                                opacity: isAvailable ? 1 : 0.7,\n                                textDecoration: isAvailable\n                                  ? \"none\"\n                                  : \"line-through\",\n                                backgroundColor:\n                                  variant?.[variantItem?.name] === ValueVariant\n                                    ? \"var(--brown)\"\n                                    : isAvailable\n                                    ? \"white\"\n                                    : \"#9f9f9f99\",\n                                color:\n                                  variant?.[variantItem?.name] === ValueVariant\n                                    ? \"white\"\n                                    : \"var(--rhine-castle)\",\n                                border:\n                                  variant?.[variantItem?.name] === ValueVariant\n                                    ? \"2px solid var(--brown)\"\n                                    : \"1px solid black\",\n                                cursor: isAvailable ? \"pointer\" : \"not-allowed\",\n                              }}\n                            >\n                              {ValueVariant}\n                            </button>\n                          );\n                        })}\n                      </Stack>\n                    </Box>\n                  ))\n              : null}\n\n            <div className={styles[\"row\"]}>\n              {selectedVariantObject ? (\n                selectedVariantObject.stock > 10 ? null : (\n                  <span style={{ color: \"orange\" }}>\n                    {\" \"}\n                    {/* Only {selectedVariantObject.stock} left in stock{\" \"} */}\n                  </span>\n                )\n              ) : (\n                <span style={{ color: \"red\" }}> out of stock </span>\n              )}\n            </div>\n\n            <div className={`${styles[\"row\"]} ${styles[\"btns-action\"]}`}>\n              <Box\n                className={`${styles[\"row\"]} ${styles[\"btn-count\"]}`}\n                sx={{\n                  padding: { xs: \"8px 4px\", sm: \"13px 8px\" },\n                  border: \"1px solid var(--unicorn-silver)\",\n                  borderRadius: \"10px\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                  flexWrap: \"nowrap\",\n                }}\n              >\n                <Minus\n                  onClick={() => {\n                    if (counter > 1) {\n                      setCounter((prev) => prev - 1);\n                    }\n                  }}\n                  style={{ cursor: \"pointer\" }}\n                  size=\"20\"\n                  variant=\"Outline\"\n                  color=\"#1B1B1B\"\n                />\n                <div\n                  style={{\n                    fontSize: \"1rem\",\n                    fontWeight: \"600\",\n                  }}\n                >\n                  {counter}\n                </div>\n                <Add\n                  onClick={() => {\n                    setCounter((prev) => prev + 1);\n                  }}\n                  style={{ cursor: \"pointer\" }}\n                  size=\"20\"\n                  variant=\"Outline\"\n                  color=\"#1B1B1B\"\n                />\n              </Box>\n              <button\n                className={styles[\"cart-button\"]}\n                style={{\n                  opacity: counter < 1 ? \".3\" : \"1\",\n                  pointerEvents: counter < 1 ? \"none\" : \"initial\",\n                }}\n                disabled={\n                  CartAddLoad ||\n                  selectedVariantObject?.stock == 0 ||\n                  !selectedVariantObject ||\n                  productDetails?.variants?.length < 1 ||\n                  counter < 1 ||\n                  counter > selectedVariantObject?.stock\n                }\n                onClick={(e) => {\n                  e.stopPropagation();\n                  if (counter > selectedVariantObject?.stock) {\n                    toast.error(\"Out of stock\");\n                    return;\n                  }\n                  let itemForCart = cartItems?.find(\n                    (cartItem) =>\n                      cartItem?.product.id == +id &&\n                      cartItem?.variant?.id == selectedVariantObject?.id\n                  );\n                  let newCount = itemForCart\n                    ? Math.trunc(counter - itemForCart.count)\n                    : counter;\n                  if (newCount === 0) return toast.error(\"please change count\");\n                  HandleMessageIsAuth(() => {\n                    handleAddToCart([\n                      {\n                        product: +id,\n                        count: newCount,\n                        variant: selectedVariantObject?.id,\n                      },\n                    ]);\n                    setOpen(true);\n                  });\n                }}\n              >\n                <ShoppingCart size=\"24\" color=\"#FFF\" />\n                {CartAddLoad ? (\n                  <Stack\n                    direction=\"row\"\n                    justifyContent={\"center\"}\n                    gap={2}\n                    alignItems={\"center\"}\n                  >\n                    {\" \"}\n                    <CircularProgress\n                      color=\"inherit\"\n                      size=\"1rem\"\n                      sx={{ width: \"12px\" }}\n                    />{\" \"}\n                    Loading\n                  </Stack>\n                ) : (\n                  <span>Add to cart</span>\n                )}\n              </button>\n              <SingleProductModal\n                open={open}\n                handleClose={setOpen}\n                productDetails={productDetails}\n                cartItems={cartItems}\n                selectedVariantObject={selectedVariantObject}\n              />\n              <WishlistProductDetails id={+id} />\n            </div>\n            <div\n              style={{\n                fontSize: \"16px\",\n                fontWeight: \"600\",\n                color: \"var(--errie-black)\",\n              }}\n            >\n              Description\n            </div>\n            <div\n              style={{\n                fontSize: \"14px\",\n                fontWeight: \"500\",\n                color: \"var(--placeholder-text)\",\n              }}\n            >\n              {productDetails.description}\n            </div>\n            <div\n              style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"10px\",\n                margin: \"12px 0px\",\n              }}\n            >\n              <img src={delivery} className={styles[\"delivery-icon\"]} />\n              <div>\n                <div>Delivery details</div>\n                <div>\n                  Door delivery between {formattedStartDate} and{\" \"}\n                  {formattedEndDate}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      <Police />\n      <Box\n        sx={{\n          mx: { xs: \"20px\", md: \"40px\", lg: \"150px\" },\n          mb: { xs: \"120px\", md: \"140px\", lg: \"160px\" },\n        }}\n      >\n        <Typography\n          variant=\"h4\"\n          sx={{\n            marginLeft: { xs: \"5px\", md: \"10px\", lg: \"0px\" },\n            marginBottom: \"16px\",\n            fontWeight: \"400\",\n            fontSize: { xs: \"24px\", md: \"32px\", lg: \"40px\" },\n          }}\n        >\n          You may also like\n        </Typography>\n        <SwiperComponent setReload={setReload} items={relatedProducts} />\n      </Box>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}