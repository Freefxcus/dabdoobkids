{"ast":null,"code":"import{jwtDecode}from\"jwt-decode\";import React from\"react\";import{toast}from\"react-toastify\";const isTokenExpired=token=>{if(!token)return true;try{const decodedToken=jwtDecode(token);const currentTime=Date.now()/1000;// Convert to seconds\nreturn decodedToken.exp!==undefined&&decodedToken.exp>currentTime;}catch(error){console.error(\"Error decoding token:\",error);return true;}};const HandleMessageIsAuth=Fn=>{const isAuthenticated=localStorage.getItem(\"access_token\")&&isTokenExpired(localStorage.getItem(\"access_token\"));localStorage.getItem(\"refresh_token\");if(!isAuthenticated){return toast.error(\"Please login first\");}return Fn&&Fn();};export default HandleMessageIsAuth;","map":{"version":3,"names":["jwtDecode","React","toast","isTokenExpired","token","decodedToken","currentTime","Date","now","exp","undefined","error","console","HandleMessageIsAuth","Fn","isAuthenticated","localStorage","getItem"],"sources":["/var/www/production/portal/src/utils/message/index.js"],"sourcesContent":["import { jwtDecode } from \"jwt-decode\";\r\nimport React from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst isTokenExpired = (token) => {\r\n  if (!token) return true;\r\n\r\n  try {\r\n    const decodedToken = jwtDecode(token);\r\n    const currentTime = Date.now() / 1000; // Convert to seconds\r\n    return decodedToken.exp !== undefined && decodedToken.exp > currentTime;\r\n  } catch (error) {\r\n    console.error(\"Error decoding token:\", error);\r\n    return true;\r\n  }\r\n};\r\nconst HandleMessageIsAuth = (Fn) => {\r\n  const isAuthenticated =\r\n    localStorage.getItem(\"access_token\") &&\r\n    isTokenExpired(localStorage.getItem(\"access_token\"));\r\n  localStorage.getItem(\"refresh_token\");\r\n\r\n  if (!isAuthenticated) {\r\n    return toast.error(\"Please login first\");\r\n    \r\n  }\r\n return  Fn && Fn();\r\n \r\n};\r\n\r\nexport default HandleMessageIsAuth;\r\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,YAAY,CACtC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,KAAM,CAAAC,cAAc,CAAIC,KAAK,EAAK,CAChC,GAAI,CAACA,KAAK,CAAE,MAAO,KAAI,CAEvB,GAAI,CACF,KAAM,CAAAC,YAAY,CAAGL,SAAS,CAACI,KAAK,CAAC,CACrC,KAAM,CAAAE,WAAW,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CAAE;AACvC,MAAO,CAAAH,YAAY,CAACI,GAAG,GAAKC,SAAS,EAAIL,YAAY,CAACI,GAAG,CAAGH,WAAW,CACzE,CAAE,MAAOK,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7C,MAAO,KAAI,CACb,CACF,CAAC,CACD,KAAM,CAAAE,mBAAmB,CAAIC,EAAE,EAAK,CAClC,KAAM,CAAAC,eAAe,CACnBC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,EACpCd,cAAc,CAACa,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAAC,CACtDD,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAErC,GAAI,CAACF,eAAe,CAAE,CACpB,MAAO,CAAAb,KAAK,CAACS,KAAK,CAAC,oBAAoB,CAAC,CAE1C,CACD,MAAQ,CAAAG,EAAE,EAAIA,EAAE,CAAC,CAAC,CAEnB,CAAC,CAED,cAAe,CAAAD,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}