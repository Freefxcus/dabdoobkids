{"ast":null,"code":"import React from\"react\";import{useAddToWishListMutation,useDeleteWishListMutation,useGetAllWishListQuery}from\"../../Redux/wishlistApi\";import{notifyError,notifySuccess}from\"../../utils/general\";import HandleMessageIsAuth from\"../../utils/message\";import styles from\"../../styles/pages/Details.module.css\";import eHeart from\"../../images/empty-heart.svg\";import fHeart from\"../../images/filled-heart.svg\";import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function WishlistProductDetails(_ref){var _wishListData$data,_wishListData$data$;let{id}=_ref;console.log(\"wishListProductDetails rendered\");const{data:wishListData}=useGetAllWishListQuery();const wishListItems=(wishListData===null||wishListData===void 0?void 0:(_wishListData$data=wishListData.data)===null||_wishListData$data===void 0?void 0:(_wishListData$data$=_wishListData$data[0])===null||_wishListData$data$===void 0?void 0:_wishListData$data$.items)||[];const wished=wishListItems.some(product=>{var _product$product;return(product===null||product===void 0?void 0:(_product$product=product.product)===null||_product$product===void 0?void 0:_product$product.id)==id;});const[addToWishList,{isLoading:wishListAddLoad,isSuccess:isSuccessAddWishList,isError:isErrorAddWishList,error:addWishListError// Capture the error object\n}]=useAddToWishListMutation();const[deleteWishList,{isLoading:wishListDeleteLoad,isSuccess:isSuccessDeleteWishList,isError:isErrorDeleteWishList,error:deleteWishListError// Capture the error object\n}]=useDeleteWishListMutation();const handleTargetWishlist=async()=>{try{if(wished){await deleteWishList(id).unwrap();// unwrap to handle promise rejection\nnotifySuccess(\"Removed from wishlist!\");}else{await addToWishList(id).unwrap();// unwrap to handle promise rejection\nnotifySuccess(\"Added to wishlist!\");}}catch(error){if(isErrorAddWishList||isErrorDeleteWishList){var _addWishListError$dat,_deleteWishListError$;const errorMessage=(addWishListError===null||addWishListError===void 0?void 0:(_addWishListError$dat=addWishListError.data)===null||_addWishListError$dat===void 0?void 0:_addWishListError$dat.message)||(deleteWishListError===null||deleteWishListError===void 0?void 0:(_deleteWishListError$=deleteWishListError.data)===null||_deleteWishListError$===void 0?void 0:_deleteWishListError$.message)||\"An error occurred\";notifyError(errorMessage);}else{notifyError(error||\"An error occurred\");}}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();HandleMessageIsAuth(handleTargetWishlist);},className:styles[\"heart-button\"],children:/*#__PURE__*/_jsx(\"img\",{alt:\"heart-icon\",src:wished?fHeart:eHeart,className:styles[\"heart-icon\"],width:\"30px\",height:\"30px\"})})});}","map":{"version":3,"names":["React","useAddToWishListMutation","useDeleteWishListMutation","useGetAllWishListQuery","notifyError","notifySuccess","HandleMessageIsAuth","styles","eHeart","fHeart","jsx","_jsx","Fragment","_Fragment","WishlistProductDetails","_ref","_wishListData$data","_wishListData$data$","id","console","log","data","wishListData","wishListItems","items","wished","some","product","_product$product","addToWishList","isLoading","wishListAddLoad","isSuccess","isSuccessAddWishList","isError","isErrorAddWishList","error","addWishListError","deleteWishList","wishListDeleteLoad","isSuccessDeleteWishList","isErrorDeleteWishList","deleteWishListError","handleTargetWishlist","unwrap","_addWishListError$dat","_deleteWishListError$","errorMessage","message","children","onClick","e","stopPropagation","className","alt","src","width","height"],"sources":["/var/www/production/portal/src/components/singleProduct/WishlistProductDetails.jsx"],"sourcesContent":["import React from \"react\";\nimport {\n  useAddToWishListMutation,\n  useDeleteWishListMutation,\n  useGetAllWishListQuery,\n} from \"../../Redux/wishlistApi\";\nimport { notifyError, notifySuccess } from \"../../utils/general\";\nimport HandleMessageIsAuth from \"../../utils/message\";\nimport styles from \"../../styles/pages/Details.module.css\";\nimport eHeart from \"../../images/empty-heart.svg\";\nimport fHeart from \"../../images/filled-heart.svg\";\nexport default function WishlistProductDetails({ id }) {\n  console.log(\"wishListProductDetails rendered\");\n  const { data: wishListData } = useGetAllWishListQuery();\n  const wishListItems = wishListData?.data?.[0]?.items || [];\n\n  const wished = wishListItems.some((product) => product?.product?.id == id);\n\n  const [\n    addToWishList,\n    {\n      isLoading: wishListAddLoad,\n      isSuccess: isSuccessAddWishList,\n      isError: isErrorAddWishList,\n      error: addWishListError, // Capture the error object\n    },\n  ] = useAddToWishListMutation();\n\n  const [\n    deleteWishList,\n    {\n      isLoading: wishListDeleteLoad,\n      isSuccess: isSuccessDeleteWishList,\n      isError: isErrorDeleteWishList,\n      error: deleteWishListError, // Capture the error object\n    },\n  ] = useDeleteWishListMutation();\n\n  const handleTargetWishlist = async () => {\n    try {\n      if (wished) {\n        await deleteWishList(id).unwrap(); // unwrap to handle promise rejection\n\n        notifySuccess(\"Removed from wishlist!\");\n      } else {\n        await addToWishList(id).unwrap(); // unwrap to handle promise rejection\n\n        notifySuccess(\"Added to wishlist!\");\n      }\n    } catch (error) {\n      if (isErrorAddWishList || isErrorDeleteWishList) {\n        const errorMessage =\n          addWishListError?.data?.message ||\n          deleteWishListError?.data?.message ||\n          \"An error occurred\";\n        notifyError(errorMessage);\n      } else {\n        notifyError(error || \"An error occurred\");\n      }\n    }\n  };\n  return (\n    <>\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          HandleMessageIsAuth(handleTargetWishlist);\n        }}\n        className={styles[\"heart-button\"]}\n      >\n        <img\n          alt=\"heart-icon\"\n          src={wished ? fHeart : eHeart}\n          className={styles[\"heart-icon\"]}\n          width=\"30px\"\n          height=\"30px\"\n        />\n      </button>\n    </>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OACEC,wBAAwB,CACxBC,yBAAyB,CACzBC,sBAAsB,KACjB,yBAAyB,CAChC,OAASC,WAAW,CAAEC,aAAa,KAAQ,qBAAqB,CAChE,MAAO,CAAAC,mBAAmB,KAAM,qBAAqB,CACrD,MAAO,CAAAC,MAAM,KAAM,uCAAuC,CAC1D,MAAO,CAAAC,MAAM,KAAM,8BAA8B,CACjD,MAAO,CAAAC,MAAM,KAAM,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBACnD,cAAe,SAAS,CAAAC,sBAAsBA,CAAAC,IAAA,CAAS,KAAAC,kBAAA,CAAAC,mBAAA,IAAR,CAAEC,EAAG,CAAC,CAAAH,IAAA,CACnDI,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAC9C,KAAM,CAAEC,IAAI,CAAEC,YAAa,CAAC,CAAGnB,sBAAsB,CAAC,CAAC,CACvD,KAAM,CAAAoB,aAAa,CAAG,CAAAD,YAAY,SAAZA,YAAY,kBAAAN,kBAAA,CAAZM,YAAY,CAAED,IAAI,UAAAL,kBAAA,kBAAAC,mBAAA,CAAlBD,kBAAA,CAAqB,CAAC,CAAC,UAAAC,mBAAA,iBAAvBA,mBAAA,CAAyBO,KAAK,GAAI,EAAE,CAE1D,KAAM,CAAAC,MAAM,CAAGF,aAAa,CAACG,IAAI,CAAEC,OAAO,OAAAC,gBAAA,OAAK,CAAAD,OAAO,SAAPA,OAAO,kBAAAC,gBAAA,CAAPD,OAAO,CAAEA,OAAO,UAAAC,gBAAA,iBAAhBA,gBAAA,CAAkBV,EAAE,GAAIA,EAAE,GAAC,CAE1E,KAAM,CACJW,aAAa,CACb,CACEC,SAAS,CAAEC,eAAe,CAC1BC,SAAS,CAAEC,oBAAoB,CAC/BC,OAAO,CAAEC,kBAAkB,CAC3BC,KAAK,CAAEC,gBAAkB;AAC3B,CAAC,CACF,CAAGpC,wBAAwB,CAAC,CAAC,CAE9B,KAAM,CACJqC,cAAc,CACd,CACER,SAAS,CAAES,kBAAkB,CAC7BP,SAAS,CAAEQ,uBAAuB,CAClCN,OAAO,CAAEO,qBAAqB,CAC9BL,KAAK,CAAEM,mBAAqB;AAC9B,CAAC,CACF,CAAGxC,yBAAyB,CAAC,CAAC,CAE/B,KAAM,CAAAyC,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACF,GAAIlB,MAAM,CAAE,CACV,KAAM,CAAAa,cAAc,CAACpB,EAAE,CAAC,CAAC0B,MAAM,CAAC,CAAC,CAAE;AAEnCvC,aAAa,CAAC,wBAAwB,CAAC,CACzC,CAAC,IAAM,CACL,KAAM,CAAAwB,aAAa,CAACX,EAAE,CAAC,CAAC0B,MAAM,CAAC,CAAC,CAAE;AAElCvC,aAAa,CAAC,oBAAoB,CAAC,CACrC,CACF,CAAE,MAAO+B,KAAK,CAAE,CACd,GAAID,kBAAkB,EAAIM,qBAAqB,CAAE,KAAAI,qBAAA,CAAAC,qBAAA,CAC/C,KAAM,CAAAC,YAAY,CAChB,CAAAV,gBAAgB,SAAhBA,gBAAgB,kBAAAQ,qBAAA,CAAhBR,gBAAgB,CAAEhB,IAAI,UAAAwB,qBAAA,iBAAtBA,qBAAA,CAAwBG,OAAO,IAC/BN,mBAAmB,SAAnBA,mBAAmB,kBAAAI,qBAAA,CAAnBJ,mBAAmB,CAAErB,IAAI,UAAAyB,qBAAA,iBAAzBA,qBAAA,CAA2BE,OAAO,GAClC,mBAAmB,CACrB5C,WAAW,CAAC2C,YAAY,CAAC,CAC3B,CAAC,IAAM,CACL3C,WAAW,CAACgC,KAAK,EAAI,mBAAmB,CAAC,CAC3C,CACF,CACF,CAAC,CACD,mBACEzB,IAAA,CAAAE,SAAA,EAAAoC,QAAA,cACEtC,IAAA,WACEuC,OAAO,CAAGC,CAAC,EAAK,CACdA,CAAC,CAACC,eAAe,CAAC,CAAC,CACnB9C,mBAAmB,CAACqC,oBAAoB,CAAC,CAC3C,CAAE,CACFU,SAAS,CAAE9C,MAAM,CAAC,cAAc,CAAE,CAAA0C,QAAA,cAElCtC,IAAA,QACE2C,GAAG,CAAC,YAAY,CAChBC,GAAG,CAAE9B,MAAM,CAAGhB,MAAM,CAAGD,MAAO,CAC9B6C,SAAS,CAAE9C,MAAM,CAAC,YAAY,CAAE,CAChCiD,KAAK,CAAC,MAAM,CACZC,MAAM,CAAC,MAAM,CACd,CAAC,CACI,CAAC,CACT,CAAC,CAEP","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}