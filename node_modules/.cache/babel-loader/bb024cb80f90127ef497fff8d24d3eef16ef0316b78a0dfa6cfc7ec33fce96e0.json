{"ast":null,"code":"import instance from\"../utils/interceptor.js\";import{toast}from\"react-toastify\";import{baseUrl}from\"./baseUrl\";export const isValidUser=async()=>{const pathname=window.location.pathname;const pathSegments=pathname.split(\"/\").filter(segment=>segment!==\"\");const firstEndpoint=pathSegments[0];const backendUrl=baseUrl.production;if(// [\"profile\"].includes(firstEndpoint) &&\n!localStorage.getItem(\"access_token\")){// window.location.href = `${window.location.protocol}//${window.location.host}/login`;\nreturn true;}else{await instance.post(`${backendUrl}/auth/refresh`,{refreshToken:localStorage.getItem(\"access_token\")}).then(response=>{console.log(response);// returnedValue = response.data.data;\n}).catch(error=>{throw new Error(error);});}};export const notifySuccess=msg=>{toast.success(msg,{position:\"top-center\",autoClose:1000,// Auto close the notification after 3000 milliseconds (3 seconds)\nhideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true});};export const notifyError=msg=>{toast.error(msg,{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true});};export const navigate=endpoint=>{window.location.href=`${window.location.protocol}//${window.location.host}${endpoint}`;};export const truncateText=(text,maxLength)=>{if((text===null||text===void 0?void 0:text.length)>maxLength){return text.slice(0,maxLength)+\"...\";}return text;};export const calcDiscount=(selectedVariantObject,productDetails)=>{// Get the base price and ensure it's a valid number\nconst price=selectedVariantObject&&!isNaN(+(selectedVariantObject===null||selectedVariantObject===void 0?void 0:selectedVariantObject.price))?+(selectedVariantObject===null||selectedVariantObject===void 0?void 0:selectedVariantObject.price):!isNaN(+(productDetails===null||productDetails===void 0?void 0:productDetails.price))?+(productDetails===null||productDetails===void 0?void 0:productDetails.price):0;// Return 0 if price is invalid\nif(!price||price<=0){return 0;// Return 0 if the price is invalid or zero\n}const discountType=productDetails===null||productDetails===void 0?void 0:productDetails.discountType;const discountAmount=+(productDetails===null||productDetails===void 0?void 0:productDetails.discount)||0;// Apply discount based on discountType\nif(discountType===\"percentage\"&&discountAmount){return{priceAfter:Math.trunc(price-price*discountAmount/100).toFixed(),price:price.toFixed(),discount:true};}else if(discountType!==\"percentage\"&&discountAmount){return{priceAfter:Math.trunc(price-discountAmount).toFixed(),price:price.toFixed(),discount:true};}else{return{priceAfter:null,discount:false,price:price};// Return original price if no valid discount type is provided\n}};","map":{"version":3,"names":["instance","toast","baseUrl","isValidUser","pathname","window","location","pathSegments","split","filter","segment","firstEndpoint","backendUrl","production","localStorage","getItem","post","refreshToken","then","response","console","log","catch","error","Error","notifySuccess","msg","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","notifyError","navigate","endpoint","href","protocol","host","truncateText","text","maxLength","length","slice","calcDiscount","selectedVariantObject","productDetails","price","isNaN","discountType","discountAmount","discount","priceAfter","Math","trunc","toFixed"],"sources":["/var/www/production/portal/src/utils/general.js"],"sourcesContent":["import instance from \"../utils/interceptor.js\";\r\nimport { toast } from \"react-toastify\";\r\nimport { baseUrl } from \"./baseUrl\";\r\n\r\nexport const isValidUser = async () => {\r\n  const pathname = window.location.pathname;\r\n  const pathSegments = pathname.split(\"/\").filter((segment) => segment !== \"\");\r\n  const firstEndpoint = pathSegments[0];\r\n\r\n  const backendUrl = baseUrl.production;\r\n\r\n  if (\r\n    // [\"profile\"].includes(firstEndpoint) &&\r\n    !localStorage.getItem(\"access_token\")\r\n  ) {\r\n    // window.location.href = `${window.location.protocol}//${window.location.host}/login`;\r\n    return true;\r\n  } else {\r\n    await instance\r\n      .post(`${backendUrl}/auth/refresh`, {\r\n        refreshToken: localStorage.getItem(\"access_token\"),\r\n      })\r\n      .then((response) => {\r\n        console.log(response);\r\n        // returnedValue = response.data.data;\r\n      })\r\n      .catch((error) => {\r\n        throw new Error(error);\r\n      });\r\n  }\r\n};\r\n\r\nexport const notifySuccess = (msg) => {\r\n  toast.success(msg, {\r\n    position: \"top-center\",\r\n    autoClose: 1000, // Auto close the notification after 3000 milliseconds (3 seconds)\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n  });\r\n};\r\n\r\nexport const notifyError = (msg) => {\r\n  toast.error(msg, {\r\n    position: \"top-center\",\r\n    autoClose: 1000,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n  });\r\n};\r\n\r\nexport const navigate = (endpoint) => {\r\n  window.location.href = `${window.location.protocol}//${window.location.host}${endpoint}`;\r\n};\r\n\r\nexport const truncateText = (text, maxLength) => {\r\n  if (text?.length > maxLength) {\r\n    return text.slice(0, maxLength) + \"...\";\r\n  }\r\n  return text;\r\n};\r\nexport const calcDiscount = (selectedVariantObject, productDetails) => {\r\n  // Get the base price and ensure it's a valid number\r\n  const price =\r\n    selectedVariantObject && !isNaN(+selectedVariantObject?.price)\r\n      ? +selectedVariantObject?.price\r\n      : !isNaN(+productDetails?.price)\r\n      ? +productDetails?.price\r\n      : 0; // Return 0 if price is invalid\r\n\r\n  if (!price || price <= 0) {\r\n    return 0; // Return 0 if the price is invalid or zero\r\n  }\r\n\r\n  const discountType = productDetails?.discountType;\r\n  const discountAmount = +productDetails?.discount || 0;\r\n\r\n  // Apply discount based on discountType\r\n  if (discountType === \"percentage\" && discountAmount) {\r\n    return {\r\n      priceAfter: Math.trunc(price - (price * discountAmount) / 100).toFixed(),\r\n      price: price.toFixed(),\r\n      discount: true,\r\n    };\r\n  } else if (discountType !== \"percentage\" && discountAmount) {\r\n    return {\r\n      priceAfter: Math.trunc(price - discountAmount).toFixed(),\r\n      price: price.toFixed(),\r\n      discount: true,\r\n    };\r\n  } else {\r\n    return { priceAfter: null, discount: false, price: price }; // Return original price if no valid discount type is provided\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}