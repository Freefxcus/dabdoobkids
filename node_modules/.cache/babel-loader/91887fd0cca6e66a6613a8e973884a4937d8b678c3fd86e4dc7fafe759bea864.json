{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import styles from\"../../styles/pages/Home.module.css\";import CountdownTimer from\"../CountdownTimer\";import Star from\"../Star\";import ClothesCard from\"../ClothesCard\";import instance from\"../../utils/interceptor\";import{useNavigate}from\"react-router-dom\";import{Swiper,SwiperSlide}from\"swiper/react\";import{Navigation}from\"swiper/modules\";import{baseUrl}from\"../../utils/baseUrl\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const backendUrl=baseUrl.production;export default function DailySaleComponent(){console.log(\"dailySale component rendered\");const[products,setProducts]=useState([]);const[endDate,setEndDate]=useState([]);const[percentage,setPercentage]=useState(0);const[timeLeft,setTimeLeft]=useState({hours:0,minutes:0,seconds:0});const[loading,setLoading]=useState(true);// Loading state\nconst[error,setError]=useState(null);// Error state\nconst navigate=useNavigate();useEffect(()=>{const calculateTimeLeft=saleEndTime=>{const end=new Date(saleEndTime).getTime();const now=new Date().getTime();const difference=end-now;if(difference>0){const hours=Math.floor(difference%(1000*60*60*24)/(1000*60*60));const minutes=Math.floor(difference%(1000*60*60)/(1000*60));const seconds=Math.floor(difference%(1000*60)/1000);setTimeLeft({hours,minutes,seconds});}else{// Sale has ended\nsetTimeLeft({hours:0,minutes:0,seconds:0});}};const fetchDailySaleProducts=async()=>{try{var _response$data,_response$data$data,_response$data2,_response$data2$data,_response$data2$data$,_response$data3,_response$data3$data,_response$data3$data$;const response=await instance.get(`${backendUrl}/products/sale`);const productsData=response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:(_response$data$data=_response$data.data)===null||_response$data$data===void 0?void 0:_response$data$data.products;const saleEndTime=response===null||response===void 0?void 0:(_response$data2=response.data)===null||_response$data2===void 0?void 0:(_response$data2$data=_response$data2.data)===null||_response$data2$data===void 0?void 0:(_response$data2$data$=_response$data2$data.sale)===null||_response$data2$data$===void 0?void 0:_response$data2$data$.end;setPercentage(response===null||response===void 0?void 0:(_response$data3=response.data)===null||_response$data3===void 0?void 0:(_response$data3$data=_response$data3.data)===null||_response$data3$data===void 0?void 0:(_response$data3$data$=_response$data3$data.sale)===null||_response$data3$data$===void 0?void 0:_response$data3$data$.percentage);console.log(\"saleEndTime\",percentage);if(productsData){setProducts(productsData);calculateTimeLeft(saleEndTime);setEndDate(saleEndTime);}}catch(err){console.error(\"Failed to fetch daily sale products:\",err);setError(err);}finally{setLoading(false);}};fetchDailySaleProducts();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading daily sale products...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error fetching daily sale products: \",error.message]});}if(!products.length){return/*#__PURE__*/_jsx(_Fragment,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"padding-container section-bottom-margin\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"10px\",marginBottom:\"20px\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,style:{marginBottom:\"5px\"},children:\"Daily Sale\"}),/*#__PURE__*/_jsx(CountdownTimer,{hours:timeLeft.hours,minutes:timeLeft.minutes,seconds:timeLeft.seconds,type:\"b\"})]}),/*#__PURE__*/_jsx(Star,{type:\"b\",value:percentage}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>navigate(`/search?sale=true&endDate=${endDate}`),style:{marginLeft:\"auto\",color:\"var(--brown)\",fontSize:\"14px\",cursor:\"pointer\",textAlign:\"center\",whiteSpace:\"nowrap\"},children:\"All Collections\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Swiper,{className:\"mySwiper\",grabCursor:true,autoplay:{delay:2000,disableOnInteraction:false},navigation:false,modules:[Navigation],breakpoints:{// when window width is >= 320px\n320:{slidesPerView:2,spaceBetween:10},// when window width is >= 480px\n480:{slidesPerView:2,spaceBetween:20},// when window width is >= 768px\n768:{slidesPerView:3,spaceBetween:30},// when window width is >= 1024px\n1024:{slidesPerView:4,spaceBetween:40},1700:{slidesPerView:5,spaceBetween:40},2700:{slidesPerView:6,spaceBetween:40}},children:products!==null&&products!==void 0&&products.length?products===null||products===void 0?void 0:products.map(item=>/*#__PURE__*/_jsx(SwiperSlide,{style:{display:\"flex\",justifyContent:\"center\"// alignItems: \"center\",\n},children:/*#__PURE__*/_jsx(ClothesCard,{item:item})},item.id||item._id)):/*#__PURE__*/_jsx(_Fragment,{children:\"not products\"})})})]});}","map":{"version":3,"names":["React","useEffect","useState","styles","CountdownTimer","Star","ClothesCard","instance","useNavigate","Swiper","SwiperSlide","Navigation","baseUrl","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","backendUrl","production","DailySaleComponent","console","log","products","setProducts","endDate","setEndDate","percentage","setPercentage","timeLeft","setTimeLeft","hours","minutes","seconds","loading","setLoading","error","setError","navigate","calculateTimeLeft","saleEndTime","end","Date","getTime","now","difference","Math","floor","fetchDailySaleProducts","_response$data","_response$data$data","_response$data2","_response$data2$data","_response$data2$data$","_response$data3","_response$data3$data","_response$data3$data$","response","get","productsData","data","sale","err","children","message","length","className","style","display","alignItems","gap","marginBottom","title","type","value","onClick","marginLeft","color","fontSize","cursor","textAlign","whiteSpace","grabCursor","autoplay","delay","disableOnInteraction","navigation","modules","breakpoints","slidesPerView","spaceBetween","map","item","justifyContent","id","_id"],"sources":["/var/www/production/portal/src/components/Home/DailySaleComponent.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport styles from \"../../styles/pages/Home.module.css\";\nimport CountdownTimer from \"../CountdownTimer\";\nimport Star from \"../Star\";\nimport ClothesCard from \"../ClothesCard\";\nimport instance from \"../../utils/interceptor\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport { Navigation } from \"swiper/modules\";\n\nimport { baseUrl } from \"../../utils/baseUrl\";\nconst backendUrl = baseUrl.production;\nexport default function DailySaleComponent() {\n  console.log(\"dailySale component rendered\");\n  const [products, setProducts] = useState([]);\n  const [endDate, setEndDate] = useState([]);\n  const [percentage, setPercentage] = useState(0);\n  const [timeLeft, setTimeLeft] = useState({\n    hours: 0,\n    minutes: 0,\n    seconds: 0,\n  });\n  const [loading, setLoading] = useState(true); // Loading state\n  const [error, setError] = useState(null); // Error state\n  const navigate = useNavigate();\n  useEffect(() => {\n    const calculateTimeLeft = (saleEndTime) => {\n      const end = new Date(saleEndTime).getTime();\n      const now = new Date().getTime();\n      const difference = end - now;\n      if (difference > 0) {\n        const hours = Math.floor(\n          (difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\n        );\n        const minutes = Math.floor(\n          (difference % (1000 * 60 * 60)) / (1000 * 60)\n        );\n        const seconds = Math.floor((difference % (1000 * 60)) / 1000);\n        setTimeLeft({ hours, minutes, seconds });\n      } else {\n        // Sale has ended\n        setTimeLeft({ hours: 0, minutes: 0, seconds: 0 });\n      }\n    };\n\n    const fetchDailySaleProducts = async () => {\n      try {\n        const response = await instance.get(`${backendUrl}/products/sale`);\n        const productsData = response?.data?.data?.products;\n        const saleEndTime = response?.data?.data?.sale?.end;\n        setPercentage(response?.data?.data?.sale?.percentage);\n        console.log(\"saleEndTime\", percentage);\n\n        if (productsData) {\n          setProducts(productsData);\n          calculateTimeLeft(saleEndTime);\n          setEndDate(saleEndTime);\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch daily sale products:\", err);\n        setError(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchDailySaleProducts();\n  }, []);\n\n  if (loading) {\n    return <div>Loading daily sale products...</div>;\n  }\n\n  if (error) {\n    return <div>Error fetching daily sale products: {error.message}</div>;\n  }\n\n  if (!products.length) {\n    return <></>;\n  }\n\n  return (\n    <div className=\"padding-container section-bottom-margin\">\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: \"10px\",\n          marginBottom: \"20px\",\n        }}\n      >\n        <div>\n          <div className={styles.title} style={{ marginBottom: \"5px\" }}>\n            Daily Sale\n          </div>\n          <CountdownTimer\n            hours={timeLeft.hours}\n            minutes={timeLeft.minutes}\n            seconds={timeLeft.seconds}\n            type=\"b\"\n          />\n        </div>\n        <Star type=\"b\" value={percentage} />\n        <div\n          onClick={() => navigate(`/search?sale=true&endDate=${endDate}`)}\n          style={{\n            marginLeft: \"auto\",\n            color: \"var(--brown)\",\n            fontSize: \"14px\",\n            cursor: \"pointer\",\n            textAlign: \"center\",\n            whiteSpace: \"nowrap\",\n          }}\n        >\n          All Collections\n        </div>\n      </div>\n      <div>\n        <Swiper\n          className=\"mySwiper\"\n          grabCursor={true}\n          autoplay={{\n            delay: 2000,\n            disableOnInteraction: false,\n          }}\n          navigation={false}\n          modules={[Navigation]}\n          breakpoints={{\n            // when window width is >= 320px\n            320: {\n              slidesPerView: 2,\n              spaceBetween: 10,\n            },\n            // when window width is >= 480px\n            480: {\n              slidesPerView: 2,\n              spaceBetween: 20,\n            },\n            // when window width is >= 768px\n            768: {\n              slidesPerView: 3,\n              spaceBetween: 30,\n            },\n            // when window width is >= 1024px\n            1024: {\n              slidesPerView: 4,\n              spaceBetween: 40,\n            },\n            1700: {\n              slidesPerView: 5,\n              spaceBetween: 40,\n            },\n            2700: {\n              slidesPerView: 6,\n              spaceBetween: 40,\n            },\n          }}\n        >\n          {/* .filter((item, i) => item?.category?.id === (currentCat?.id||1)) */}\n          {products?.length ? (\n            products?.map((item) => (\n              <SwiperSlide\n                key={item.id || item._id}\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  // alignItems: \"center\",\n                }}\n              >\n                <ClothesCard item={item} />\n              </SwiperSlide>\n            ))\n          ) : (\n            <>not products</>\n          )}\n        </Swiper>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}