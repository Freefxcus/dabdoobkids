{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import instance from\"../../utils/interceptor\";import\"./style.css\";import{baseUrl}from\"../../utils/baseUrl\";import{jsx as _jsx}from\"react/jsx-runtime\";const backendUrl=baseUrl.production;export default function BrandsSwiper(){console.log(\"brandSwiper 2 component rendered\");const[brands,setBrands]=useState([]);const[loading,setLoading]=useState(true);// To handle the loading state\nconst[error,setError]=useState(null);const[limit,setLimit]=useState(()=>Math.ceil(window.innerWidth/300)||1);const navigate=useNavigate();useEffect(()=>{const fetchBanners=async()=>{try{var _response$data,_response$data$data;const response=await instance.get(`${backendUrl}/brands`,{params:{items:50}});setBrands((response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:(_response$data$data=_response$data.data)===null||_response$data$data===void 0?void 0:_response$data$data.brands)||[]);}catch(err){console.error(\"Failed to fetch banners:\",err);setError(err);// Notify the error if needed\n}finally{setLoading(false);}};fetchBanners();},[]);// Update the limit on window resize\nuseEffect(()=>{const handleResize=()=>{setLimit(Math.ceil(window.innerWidth/300));};window.addEventListener(\"resize\",handleResize);return()=>window.removeEventListener(\"resize\",handleResize);},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Show a loading indicator\n}if(error){return/*#__PURE__*/_jsx(\"div\",{children:\"Error loading banners\"});// Show an error message\n}const repeatCount=Math.ceil(limit/((brands===null||brands===void 0?void 0:brands.length)||1));// Create a new array with the repeated brandshome\nconst newBrands=[...Array((repeatCount||1)+3)].flatMap(()=>brands);return/*#__PURE__*/_jsx(\"article\",{class:\"wrapper\",children:/*#__PURE__*/_jsx(\"div\",{class:\"marquee\",children:/*#__PURE__*/_jsx(\"div\",{class:\"marquee__group\",children:brands!==null&&brands!==void 0&&brands.length?newBrands.map((_ref,index)=>{let{images,name,id}=_ref;return/*#__PURE__*/_jsx(\"img\",{src:images[0],alt:name,style:{cursor:\"pointer\",objectFit:\"contain\",objectPosition:\"center\"},onClick:()=>{navigate(`search/?brandId=${id}`);}},index);}):null})})});}{/* <Swiper\nclassName=\"mySwiper\"\nslidesPerView={limit}\nspeed={10000}\nautoplay={{ <marquee ref={marqueeRef} direction=\"left\">\n    \n    </marquee>\n  delay: 0,\n  disableOnInteraction: false,\n}}\nmodules={[Autoplay, Pagination, Navigation]}\n// pagination={{ clickable: true }}\nloop={true}\n>\n<div className=\"swiper-container\" style={{ width: \"100%\" }}>\n  {brands?.length\n    ? newBrands.map(({ images, name, id }, index) => (\n        <SwiperSlide\n          key={index}\n          style={{\n            width: \"fit-content !important\",\n          }}\n        >\n          <div style={{ width: \"250px\", height: \"150px\" }}>\n            <img\n              src={images[0]}\n              alt={name}\n              style={{\n                cursor: \"pointer\",\n                objectFit: \"contain\",\n                objectPosition: \"center\",\n              }}\n              onClick={() => {\n                navigate(`search/?brandId=${id}`);\n              }}\n            />\n          </div>\n        </SwiperSlide>\n      ))\n    : null}\n</div>\n</Swiper> */}","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","instance","baseUrl","jsx","_jsx","backendUrl","production","BrandsSwiper","console","log","brands","setBrands","loading","setLoading","error","setError","limit","setLimit","Math","ceil","window","innerWidth","navigate","fetchBanners","_response$data","_response$data$data","response","get","params","items","data","err","handleResize","addEventListener","removeEventListener","children","repeatCount","length","newBrands","Array","flatMap","class","map","_ref","index","images","name","id","src","alt","style","cursor","objectFit","objectPosition","onClick"],"sources":["/var/www/production/portal/src/components/Home/BrandsSwiper.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport instance from \"../../utils/interceptor\";\nimport \"./style.css\";\nimport { baseUrl } from \"../../utils/baseUrl\";\nconst backendUrl = baseUrl.production;\nexport default function BrandsSwiper() {\n  console.log(\"brandSwiper 2 component rendered\");\n  const [brands, setBrands] = useState([]);\n  const [loading, setLoading] = useState(true); // To handle the loading state\n  const [error, setError] = useState(null);\n  const [limit, setLimit] = useState(\n    () => Math.ceil(window.innerWidth / 300) || 1\n  );\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchBanners = async () => {\n      try {\n        const response = await instance.get(`${backendUrl}/brands`, {\n          params: { items: 50 },\n        });\n        setBrands(response?.data?.data?.brands || []);\n      } catch (err) {\n        console.error(\"Failed to fetch banners:\", err);\n        setError(err); // Notify the error if needed\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchBanners();\n  }, []);\n\n  // Update the limit on window resize\n  useEffect(() => {\n    const handleResize = () => {\n      setLimit(Math.ceil(window.innerWidth / 300));\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  if (loading) {\n    return <div>Loading...</div>; // Show a loading indicator\n  }\n\n  if (error) {\n    return <div>Error loading banners</div>; // Show an error message\n  }\n\n  const repeatCount = Math.ceil(limit / (brands?.length || 1));\n\n  // Create a new array with the repeated brandshome\n  const newBrands = [...Array((repeatCount || 1) + 3)].flatMap(() => brands);\n\n  return (\n    <article class=\"wrapper\">\n      <div class=\"marquee\">\n        <div class=\"marquee__group\">\n          {brands?.length\n            ? newBrands.map(({ images, name, id }, index) => (\n                <img\n                  key={index}\n                  src={images[0]}\n                  alt={name}\n                  style={{\n                    cursor: \"pointer\",\n                    objectFit: \"contain\",\n                    objectPosition: \"center\",\n                  }}\n                  onClick={() => {\n                    navigate(`search/?brandId=${id}`);\n                  }}\n                />\n              ))\n            : null}\n        </div>\n      </div>\n    </article>\n  );\n}\n\n{\n  /* <Swiper\nclassName=\"mySwiper\"\nslidesPerView={limit}\nspeed={10000}\nautoplay={{ <marquee ref={marqueeRef} direction=\"left\">\n    \n    </marquee>\n  delay: 0,\n  disableOnInteraction: false,\n}}\nmodules={[Autoplay, Pagination, Navigation]}\n// pagination={{ clickable: true }}\nloop={true}\n>\n<div className=\"swiper-container\" style={{ width: \"100%\" }}>\n  {brands?.length\n    ? newBrands.map(({ images, name, id }, index) => (\n        <SwiperSlide\n          key={index}\n          style={{\n            width: \"fit-content !important\",\n          }}\n        >\n          <div style={{ width: \"250px\", height: \"150px\" }}>\n            <img\n              src={images[0]}\n              alt={name}\n              style={{\n                cursor: \"pointer\",\n                objectFit: \"contain\",\n                objectPosition: \"center\",\n              }}\n              onClick={() => {\n                navigate(`search/?brandId=${id}`);\n              }}\n            />\n          </div>\n        </SwiperSlide>\n      ))\n    : null}\n</div>\n</Swiper> */\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}