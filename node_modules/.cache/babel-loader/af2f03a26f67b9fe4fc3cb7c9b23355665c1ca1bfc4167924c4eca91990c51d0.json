{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{calcDiscount,notifySuccess}from\"../../utils/general\";import Counter from\"../singleProduct/counter\";import{useAddToCartMutation}from\"../../Redux/cartApi\";import{Box}from\"@mui/material\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function SideCartCard(_ref){var _item$product,_item$product$images,_item$product$discoun,_item$product2,_item$product3,_item$product4,_item$product4$brand;let{item}=_ref;// const [count, setCount] = useState(1);\n// const [addToCart, { isLoading: CartAddLoad }] = useAddToCartMutation();\n// const handleUpdateQuantity = async (itemObj) => {\n//   let newCount = itemObj ? Math.trunc(count - itemObj?.count) : count || 1;\n//   if (newCount === 0) return 0;\n//   let NewItem = [\n//     {\n//       product: +itemObj?.product?.id,\n//       count: newCount,\n//       variant: +itemObj?.variant?.id,\n//     },\n//   ];\n//   try {\n//     const response = await addToCart(NewItem).unwrap();\n//     const message = `Updated Item to cart!`;\n//     notifySuccess(message);\n//   } catch (error) {\n//     const errorMessage = \"Failed to Updated to cart\";\n//     // notifyError(errorMessage);\n//   }\n// };\n// useEffect(() => {\n//   setCount(item?.count);\n// }, [item]);\n// useEffect(() => {\n//   handleUpdateQuantity(item);\n// }, [count]);\nconst finalPrice=calcDiscount(item===null||item===void 0?void 0:item.variant,item===null||item===void 0?void 0:item.product);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",gap:\"10px\"},children:[/*#__PURE__*/_jsxs(Box,{sx:{position:\"relative\",maxWidth:\"150px\",width:\"150px\",height:\"auto\",maxHeight:\"150px\",border:\"1px solid #b1b1b133\",borderRadius:\"20px\",overflow:\"hidden\"},children:[/*#__PURE__*/_jsx(Box,{component:\"img\",sx:{maxWidth:\"150px\",border:\"1px solid #b1b1b133\",width:\"100%\",height:\"auto\",maxHeight:\"150px\",objectFit:\"cover\",objectPosition:\"center\",borderRadius:\"20px\"},alt:item.product.name,src:item===null||item===void 0?void 0:(_item$product=item.product)===null||_item$product===void 0?void 0:(_item$product$images=_item$product.images)===null||_item$product$images===void 0?void 0:_item$product$images[0]}),finalPrice!==null&&finalPrice!==void 0&&finalPrice.discount?/*#__PURE__*/_jsxs(Box,{sx:{position:\"absolute\",bottom:\"8px\",left:\"2px\",padding:\"4px 6px\",backgroundColor:\"var(--brown)\",borderRadius:\"4px\",color:\"#fff\"},children:[(_item$product$discoun=+(item===null||item===void 0?void 0:(_item$product2=item.product)===null||_item$product2===void 0?void 0:_item$product2.discount))===null||_item$product$discoun===void 0?void 0:_item$product$discoun.toFixed(),(item===null||item===void 0?void 0:(_item$product3=item.product)===null||_item$product3===void 0?void 0:_item$product3.discountType)===\"percentage\"?\"%\":\"EGP\"]}):null]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:\"80%\",maxWidth:\"400px\",display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\",gap:\"10px\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"10px\",fontSize:\"14px\",fontWeight:\"500\",color:\"var(--grey-text)\"},children:(_item$product4=item.product)===null||_item$product4===void 0?void 0:(_item$product4$brand=_item$product4.brand)===null||_item$product4$brand===void 0?void 0:_item$product4$brand.name}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"10px\",fontSize:\"14px\",fontWeight:\"700\",color:\"#1B1B1B\"},children:item.product.name}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"16px\",fontWeight:\"600\"},children:item.product.description})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"16px\",fontWeight:\"800\"},children:[item.count,\"X\"]}),/*#__PURE__*/_jsx(\"div\",{children:finalPrice!==null&&finalPrice!==void 0&&finalPrice.discount?/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsxs(Box,{component:\"s\",sx:{// display:{xs:\"none\",sm:\"flex\"},\nfontSize:{md:\"1rem\",sm:\"0.75rem\",xs:\"0.7rem\"},fontWeight:\"500\",color:\"var(--grey-text)\"},children:[\"EGP \",finalPrice.price,\" \"]}),\" \",/*#__PURE__*/_jsxs(Box,{component:\"span\",sx:{fontSize:{md:\"1.25rem\",sm:\"1rem\",xs:\"0.85rem\"},fontWeight:\"700\",color:\"#1B1B1B\"},children:[\"EGP \",finalPrice.priceAfter]})]}):/*#__PURE__*/_jsxs(\"span\",{children:[\"EGP \",finalPrice.price]})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"10px\",borderTop:\"1px solid #E8E8E8\",width:\"80%\"}})]});}","map":{"version":3,"names":["React","useEffect","useState","calcDiscount","notifySuccess","Counter","useAddToCartMutation","Box","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SideCartCard","_ref","_item$product","_item$product$images","_item$product$discoun","_item$product2","_item$product3","_item$product4","_item$product4$brand","item","finalPrice","variant","product","children","style","display","justifyContent","gap","sx","position","maxWidth","width","height","maxHeight","border","borderRadius","overflow","component","objectFit","objectPosition","alt","name","src","images","discount","bottom","left","padding","backgroundColor","color","toFixed","discountType","flexDirection","marginBottom","fontSize","fontWeight","brand","description","count","md","sm","xs","price","priceAfter","marginTop","borderTop"],"sources":["/var/www/production/portal/src/components/cart/SideCartCard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { calcDiscount, notifySuccess } from \"../../utils/general\";\r\nimport Counter from \"../singleProduct/counter\";\r\nimport { useAddToCartMutation } from \"../../Redux/cartApi\";\r\nimport { Box } from \"@mui/material\";\r\n\r\nexport default function SideCartCard({ item }) {\r\n  // const [count, setCount] = useState(1);\r\n\r\n  // const [addToCart, { isLoading: CartAddLoad }] = useAddToCartMutation();\r\n\r\n  // const handleUpdateQuantity = async (itemObj) => {\r\n  //   let newCount = itemObj ? Math.trunc(count - itemObj?.count) : count || 1;\r\n  //   if (newCount === 0) return 0;\r\n  //   let NewItem = [\r\n  //     {\r\n  //       product: +itemObj?.product?.id,\r\n  //       count: newCount,\r\n  //       variant: +itemObj?.variant?.id,\r\n  //     },\r\n  //   ];\r\n  //   try {\r\n  //     const response = await addToCart(NewItem).unwrap();\r\n  //     const message = `Updated Item to cart!`;\r\n  //     notifySuccess(message);\r\n  //   } catch (error) {\r\n  //     const errorMessage = \"Failed to Updated to cart\";\r\n  //     // notifyError(errorMessage);\r\n  //   }\r\n  // };\r\n\r\n  // useEffect(() => {\r\n  //   setCount(item?.count);\r\n  // }, [item]);\r\n  // useEffect(() => {\r\n  //   handleUpdateQuantity(item);\r\n  // }, [count]);\r\n  const finalPrice = calcDiscount(item?.variant, item?.product);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          gap: \"10px\",\r\n        }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            position: \"relative\",\r\n            maxWidth: \"150px\",\r\n            width:\"150px\",\r\n            height: \"auto\",\r\n            maxHeight:\"150px\",\r\n            border: \"1px solid #b1b1b133\",\r\n            borderRadius: \"20px\",\r\n            overflow:\"hidden\"\r\n          }}\r\n        >\r\n          <Box\r\n            component={\"img\"}\r\n            sx={{  maxWidth: \"150px\",  border: \"1px solid #b1b1b133\",\r\n            width:\"100%\",\r\n            height: \"auto\",\r\n            maxHeight:\"150px\",\r\n              objectFit: \"cover\",\r\n              objectPosition: \"center\",\r\n               borderRadius: \"20px\",\r\n            }}\r\n            alt={item.product.name}\r\n            src={item?.product?.images?.[0]}\r\n          />\r\n         {finalPrice?.discount? <Box\r\n            sx={{\r\n              position: \"absolute\",\r\n              bottom: \"8px\",\r\n              left: \"2px\",\r\n              padding: \"4px 6px\",\r\n              backgroundColor:\"var(--brown)\",\r\n              borderRadius:\"4px\",\r\n              color:\"#fff\"\r\n            }}\r\n          >\r\n            {(+item?.product?.discount)?.toFixed() }{item?.product?.discountType===\"percentage\"?\"%\":\"EGP\"}\r\n          </Box>:null}\r\n        </Box>\r\n        <div\r\n          style={{\r\n            width: \"80%\",\r\n            maxWidth: \"400px\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"space-between\",\r\n            gap: \"10px\",\r\n          }}\r\n        >\r\n          <div>\r\n            <div\r\n              style={{\r\n                marginBottom: \"10px\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                color: \"var(--grey-text)\",\r\n              }}\r\n            >\r\n              {item.product?.brand?.name}\r\n            </div>\r\n            <div\r\n              style={{\r\n                marginBottom: \"10px\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"700\",\r\n                color: \"#1B1B1B\",\r\n              }}\r\n            >\r\n              {item.product.name}\r\n            </div>\r\n            <div\r\n              style={{\r\n                fontSize: \"16px\",\r\n                fontWeight: \"600\",\r\n              }}\r\n            >\r\n              {item.product.description}\r\n            </div>\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n            }}\r\n          >\r\n            {/* <Counter\r\n              setCount={setCount}\r\n              count={+count}\r\n              handleUpdateQuantity={handleUpdateQuantity}\r\n              item={item.product}\r\n              CartAddLoad={CartAddLoad}\r\n              selectedVariantObject={item.variant}\r\n            /> */}\r\n            <div\r\n              style={{\r\n                fontSize: \"16px\",\r\n                fontWeight: \"800\",\r\n              }}\r\n            >\r\n              {item.count}X\r\n            </div>\r\n\r\n            <div>\r\n              {finalPrice?.discount ? (\r\n                <>\r\n                  {\" \"}\r\n                  <Box component={\"s\"}\r\n                    sx={{ \r\n                      // display:{xs:\"none\",sm:\"flex\"},\r\n                      fontSize: {md:\"1rem\",sm: \"0.75rem\",xs:\"0.7rem\"},\r\n                      fontWeight: \"500\",\r\n                      color: \"var(--grey-text)\",\r\n                    }}\r\n                  >\r\n                    EGP {finalPrice.price}{\" \"}\r\n                  </Box>{\" \"}\r\n                  <Box component={\"span\"}\r\n                    sx={{\r\n                      fontSize:  {md:\"1.25rem\",sm: \"1rem\",xs:\"0.85rem\"},\r\n                      fontWeight: \"700\",\r\n                      color: \"#1B1B1B\",\r\n                    }}\r\n                  >\r\n                    EGP {finalPrice.priceAfter}\r\n                  </Box>\r\n                </>\r\n              ) : (\r\n                <span>EGP {finalPrice.price}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        style={{\r\n          marginTop: \"10px\",\r\n          borderTop: \"1px solid #E8E8E8\",\r\n          width: \"80%\",\r\n        }}\r\n      ></div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}