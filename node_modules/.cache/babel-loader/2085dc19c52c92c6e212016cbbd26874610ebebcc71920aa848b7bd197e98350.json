{"ast":null,"code":"import React from\"react\";import styles from\"../styles/components/ClothesCard.module.css\";import lady from\"../images/lady.png\";import hot from\"../images/hot.svg\";import eHeart from\"../images/empty-heart.svg\";import fHeart from\"../images/filled-heart.svg\";import{addToWishlist,removeFromWishlist}from\"../utils/apiCalls.js\";import{useDispatch,useSelector}from\"react-redux\";import{wishlistActions}from\"../Redux/store\";import{useNavigate}from\"react-router-dom\";import{notifyError,notifySuccess,truncateText}from\"../utils/general.js\";import HandleMessageIsAuth from\"../utils/message/index.js\";import{useAddToWishListMutation,useDeleteWishListMutation,useGetAllWishListQuery}from\"../Redux/wishlistApi.jsx\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Productcard(_ref){var _wishListData$data,_wishListData$data$,_item$images,_item$extraInfo,_item$extraInfo2,_item$description;let{item,setChanged}=_ref;console.log(\"Productcard rendered not used\");const dispatch=useDispatch();const navigate=useNavigate();const{data:wishListData}=useGetAllWishListQuery();const wishListItems=(wishListData===null||wishListData===void 0?void 0:(_wishListData$data=wishListData.data)===null||_wishListData$data===void 0?void 0:(_wishListData$data$=_wishListData$data[0])===null||_wishListData$data$===void 0?void 0:_wishListData$data$.items)||[];const wished=wishListItems.some(product=>{var _product$product;return(product===null||product===void 0?void 0:(_product$product=product.product)===null||_product$product===void 0?void 0:_product$product.id)==(item===null||item===void 0?void 0:item.id);});const[addToWishList,{isLoading:wishListAddLoad,isSuccess:isSuccessAddWishList,isError:isErrorAddWishList,error:addWishListError// Capture the error object\n}]=useAddToWishListMutation();const[deleteWishList,{isLoading:wishListDeleteLoad,isSuccess:isSuccessDeleteWishList,isError:isErrorDeleteWishList,error:deleteWishListError// Capture the error object\n}]=useDeleteWishListMutation();const handleTargetWishlist=async()=>{try{if(wished){await deleteWishList(item===null||item===void 0?void 0:item.id).unwrap();// unwrap to handle promise rejection\nnotifySuccess(\"Removed from wishlist!\");}else{await addToWishList(item===null||item===void 0?void 0:item.id).unwrap();// unwrap to handle promise rejection\nnotifySuccess(\"Added to wishlist!\");}}catch(error){if(isErrorAddWishList||isErrorDeleteWishList){var _addWishListError$dat,_deleteWishListError$;const errorMessage=(addWishListError===null||addWishListError===void 0?void 0:(_addWishListError$dat=addWishListError.data)===null||_addWishListError$dat===void 0?void 0:_addWishListError$dat.message)||(deleteWishListError===null||deleteWishListError===void 0?void 0:(_deleteWishListError$=deleteWishListError.data)===null||_deleteWishListError$===void 0?void 0:_deleteWishListError$.message)||\"An error occurred\";notifyError(errorMessage);}else{notifyError(error||\"An error occurred\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,onClick:()=>{navigate(`/details/${item===null||item===void 0?void 0:item.id}`);},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"product card\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"card-top\"],children:[/*#__PURE__*/_jsx(\"img\",{src:((_item$images=item.images)===null||_item$images===void 0?void 0:_item$images[0])||\"https://i.postimg.cc/HnNLbVGh/placeholder.png\",alt:\"product\",style:{height:\"356px\",width:\"100%\",objectFit:\"cover\"}}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"heart-container\"],onClick:e=>{e.stopPropagation();HandleMessageIsAuth(handleTargetWishlist);},children:/*#__PURE__*/_jsx(\"img\",{src:wished?fHeart:eHeart,width:\"25px\",alt:\"heart\"})}),(item===null||item===void 0?void 0:(_item$extraInfo=item.extraInfo)===null||_item$extraInfo===void 0?void 0:_item$extraInfo.new)&&/*#__PURE__*/_jsxs(\"div\",{className:styles[\"hot-container\"],children:[/*#__PURE__*/_jsx(\"div\",{children:\"New\"}),/*#__PURE__*/_jsx(\"img\",{src:hot,width:\"14px\",alt:\"second heart\"})]}),(item===null||item===void 0?void 0:(_item$extraInfo2=item.extraInfo)===null||_item$extraInfo2===void 0?void 0:_item$extraInfo2.sold)&&/*#__PURE__*/_jsx(\"div\",{className:styles[\"sold-container\"],children:/*#__PURE__*/_jsx(\"div\",{children:\"Sold Out\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"card-bottom\"],children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:\"600\"},children:item===null||item===void 0?void 0:item.name}),/*#__PURE__*/_jsx(\"div\",{children:truncateText(((_item$description=item.description)===null||_item$description===void 0?void 0:_item$description.en)||item.description,20)}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:\"bold\"},children:[\"EGP\",item===null||item===void 0?void 0:item.price]})]})]});}","map":{"version":3,"names":["React","styles","lady","hot","eHeart","fHeart","addToWishlist","removeFromWishlist","useDispatch","useSelector","wishlistActions","useNavigate","notifyError","notifySuccess","truncateText","HandleMessageIsAuth","useAddToWishListMutation","useDeleteWishListMutation","useGetAllWishListQuery","jsx","_jsx","jsxs","_jsxs","Productcard","_ref","_wishListData$data","_wishListData$data$","_item$images","_item$extraInfo","_item$extraInfo2","_item$description","item","setChanged","console","log","dispatch","navigate","data","wishListData","wishListItems","items","wished","some","product","_product$product","id","addToWishList","isLoading","wishListAddLoad","isSuccess","isSuccessAddWishList","isError","isErrorAddWishList","error","addWishListError","deleteWishList","wishListDeleteLoad","isSuccessDeleteWishList","isErrorDeleteWishList","deleteWishListError","handleTargetWishlist","unwrap","_addWishListError$dat","_deleteWishListError$","errorMessage","message","className","container","onClick","children","src","images","alt","style","height","width","objectFit","e","stopPropagation","extraInfo","new","sold","fontWeight","name","description","en","price"],"sources":["/var/www/production/portal/src/components/ProductCard.jsx"],"sourcesContent":["import React from \"react\";\nimport styles from \"../styles/components/ClothesCard.module.css\";\nimport lady from \"../images/lady.png\";\nimport hot from \"../images/hot.svg\";\nimport eHeart from \"../images/empty-heart.svg\";\nimport fHeart from \"../images/filled-heart.svg\";\nimport { addToWishlist, removeFromWishlist } from \"../utils/apiCalls.js\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { wishlistActions } from \"../Redux/store\";\nimport { useNavigate } from \"react-router-dom\";\nimport { notifyError, notifySuccess, truncateText } from \"../utils/general.js\";\nimport HandleMessageIsAuth from \"../utils/message/index.js\";\nimport {\n  useAddToWishListMutation,\n  useDeleteWishListMutation,\n  useGetAllWishListQuery,\n} from \"../Redux/wishlistApi.jsx\";\nexport default function Productcard({ item, setChanged }) {\n  console.log(\"Productcard rendered not used\");\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const { data: wishListData } = useGetAllWishListQuery();\n  const wishListItems = wishListData?.data?.[0]?.items || [];\n\n  const wished = wishListItems.some(\n    (product) => product?.product?.id == item?.id\n  );\n\n  const [\n    addToWishList,\n    {\n      isLoading: wishListAddLoad,\n      isSuccess: isSuccessAddWishList,\n      isError: isErrorAddWishList,\n      error: addWishListError, // Capture the error object\n    },\n  ] = useAddToWishListMutation();\n\n  const [\n    deleteWishList,\n    {\n      isLoading: wishListDeleteLoad,\n      isSuccess: isSuccessDeleteWishList,\n      isError: isErrorDeleteWishList,\n      error: deleteWishListError, // Capture the error object\n    },\n  ] = useDeleteWishListMutation();\n\n  const handleTargetWishlist = async () => {\n    try {\n      if (wished) {\n        await deleteWishList(item?.id).unwrap(); // unwrap to handle promise rejection\n\n        notifySuccess(\"Removed from wishlist!\");\n      } else {\n        await addToWishList(item?.id).unwrap(); // unwrap to handle promise rejection\n\n        notifySuccess(\"Added to wishlist!\");\n      }\n    } catch (error) {\n      if (isErrorAddWishList || isErrorDeleteWishList) {\n        const errorMessage =\n          addWishListError?.data?.message ||\n          deleteWishListError?.data?.message ||\n          \"An error occurred\";\n        notifyError(errorMessage);\n      } else {\n        notifyError(error || \"An error occurred\");\n      }\n    }\n  };\n  return (\n    <div\n      className={styles.container}\n      onClick={() => {\n        navigate(`/details/${item?.id}`);\n      }}\n    >\n      <h1>product card</h1>\n      <div className={styles[\"card-top\"]}>\n        {/* <img src={lady} width=\"100%\" height=\"380px\" /> */}\n        <img\n          src={\n            item.images?.[0] || \"https://i.postimg.cc/HnNLbVGh/placeholder.png\"\n          }\n          alt=\"product\"\n          style={{ height: \"356px\", width: \"100%\", objectFit: \"cover\" }}\n        />\n        <div\n          className={styles[\"heart-container\"]}\n          onClick={(e) => {\n            e.stopPropagation();\n            HandleMessageIsAuth(handleTargetWishlist);\n          }}\n        >\n          <img src={wished ? fHeart : eHeart} width=\"25px\" alt=\"heart\" />\n        </div>\n        {item?.extraInfo?.new && (\n          <div className={styles[\"hot-container\"]}>\n            <div>New</div>\n            <img src={hot} width=\"14px\" alt=\"second heart\" />\n          </div>\n        )}\n        {item?.extraInfo?.sold && (\n          <div className={styles[\"sold-container\"]}>\n            <div>Sold Out</div>\n          </div>\n        )}\n      </div>\n      <div className={styles[\"card-bottom\"]}>\n        <div style={{ fontWeight: \"600\" }}>{item?.name}</div>\n        <div>{truncateText(item.description?.en || item.description, 20)}</div>\n        <div style={{ fontWeight: \"bold\" }}>EGP{item?.price}</div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,6CAA6C,CAChE,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,MAAO,CAAAC,GAAG,KAAM,mBAAmB,CACnC,MAAO,CAAAC,MAAM,KAAM,2BAA2B,CAC9C,MAAO,CAAAC,MAAM,KAAM,4BAA4B,CAC/C,OAASC,aAAa,CAAEC,kBAAkB,KAAQ,sBAAsB,CACxE,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,eAAe,KAAQ,gBAAgB,CAChD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,CAAEC,aAAa,CAAEC,YAAY,KAAQ,qBAAqB,CAC9E,MAAO,CAAAC,mBAAmB,KAAM,2BAA2B,CAC3D,OACEC,wBAAwB,CACxBC,yBAAyB,CACzBC,sBAAsB,KACjB,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAClC,cAAe,SAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAuB,KAAAC,kBAAA,CAAAC,mBAAA,CAAAC,YAAA,CAAAC,eAAA,CAAAC,gBAAA,CAAAC,iBAAA,IAAtB,CAAEC,IAAI,CAAEC,UAAW,CAAC,CAAAR,IAAA,CACtDS,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAE5C,KAAM,CAAAC,QAAQ,CAAG3B,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAA4B,QAAQ,CAAGzB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAE0B,IAAI,CAAEC,YAAa,CAAC,CAAGpB,sBAAsB,CAAC,CAAC,CACvD,KAAM,CAAAqB,aAAa,CAAG,CAAAD,YAAY,SAAZA,YAAY,kBAAAb,kBAAA,CAAZa,YAAY,CAAED,IAAI,UAAAZ,kBAAA,kBAAAC,mBAAA,CAAlBD,kBAAA,CAAqB,CAAC,CAAC,UAAAC,mBAAA,iBAAvBA,mBAAA,CAAyBc,KAAK,GAAI,EAAE,CAE1D,KAAM,CAAAC,MAAM,CAAGF,aAAa,CAACG,IAAI,CAC9BC,OAAO,OAAAC,gBAAA,OAAK,CAAAD,OAAO,SAAPA,OAAO,kBAAAC,gBAAA,CAAPD,OAAO,CAAEA,OAAO,UAAAC,gBAAA,iBAAhBA,gBAAA,CAAkBC,EAAE,IAAId,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEc,EAAE,GAC/C,CAAC,CAED,KAAM,CACJC,aAAa,CACb,CACEC,SAAS,CAAEC,eAAe,CAC1BC,SAAS,CAAEC,oBAAoB,CAC/BC,OAAO,CAAEC,kBAAkB,CAC3BC,KAAK,CAAEC,gBAAkB;AAC3B,CAAC,CACF,CAAGtC,wBAAwB,CAAC,CAAC,CAE9B,KAAM,CACJuC,cAAc,CACd,CACER,SAAS,CAAES,kBAAkB,CAC7BP,SAAS,CAAEQ,uBAAuB,CAClCN,OAAO,CAAEO,qBAAqB,CAC9BL,KAAK,CAAEM,mBAAqB;AAC9B,CAAC,CACF,CAAG1C,yBAAyB,CAAC,CAAC,CAE/B,KAAM,CAAA2C,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACF,GAAInB,MAAM,CAAE,CACV,KAAM,CAAAc,cAAc,CAACxB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEc,EAAE,CAAC,CAACgB,MAAM,CAAC,CAAC,CAAE;AAEzChD,aAAa,CAAC,wBAAwB,CAAC,CACzC,CAAC,IAAM,CACL,KAAM,CAAAiC,aAAa,CAACf,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEc,EAAE,CAAC,CAACgB,MAAM,CAAC,CAAC,CAAE;AAExChD,aAAa,CAAC,oBAAoB,CAAC,CACrC,CACF,CAAE,MAAOwC,KAAK,CAAE,CACd,GAAID,kBAAkB,EAAIM,qBAAqB,CAAE,KAAAI,qBAAA,CAAAC,qBAAA,CAC/C,KAAM,CAAAC,YAAY,CAChB,CAAAV,gBAAgB,SAAhBA,gBAAgB,kBAAAQ,qBAAA,CAAhBR,gBAAgB,CAAEjB,IAAI,UAAAyB,qBAAA,iBAAtBA,qBAAA,CAAwBG,OAAO,IAC/BN,mBAAmB,SAAnBA,mBAAmB,kBAAAI,qBAAA,CAAnBJ,mBAAmB,CAAEtB,IAAI,UAAA0B,qBAAA,iBAAzBA,qBAAA,CAA2BE,OAAO,GAClC,mBAAmB,CACrBrD,WAAW,CAACoD,YAAY,CAAC,CAC3B,CAAC,IAAM,CACLpD,WAAW,CAACyC,KAAK,EAAI,mBAAmB,CAAC,CAC3C,CACF,CACF,CAAC,CACD,mBACE/B,KAAA,QACE4C,SAAS,CAAEjE,MAAM,CAACkE,SAAU,CAC5BC,OAAO,CAAEA,CAAA,GAAM,CACbhC,QAAQ,CAAC,YAAYL,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEc,EAAE,EAAE,CAAC,CAClC,CAAE,CAAAwB,QAAA,eAEFjD,IAAA,OAAAiD,QAAA,CAAI,cAAY,CAAI,CAAC,cACrB/C,KAAA,QAAK4C,SAAS,CAAEjE,MAAM,CAAC,UAAU,CAAE,CAAAoE,QAAA,eAEjCjD,IAAA,QACEkD,GAAG,CACD,EAAA3C,YAAA,CAAAI,IAAI,CAACwC,MAAM,UAAA5C,YAAA,iBAAXA,YAAA,CAAc,CAAC,CAAC,GAAI,+CACrB,CACD6C,GAAG,CAAC,SAAS,CACbC,KAAK,CAAE,CAAEC,MAAM,CAAE,OAAO,CAAEC,KAAK,CAAE,MAAM,CAAEC,SAAS,CAAE,OAAQ,CAAE,CAC/D,CAAC,cACFxD,IAAA,QACE8C,SAAS,CAAEjE,MAAM,CAAC,iBAAiB,CAAE,CACrCmE,OAAO,CAAGS,CAAC,EAAK,CACdA,CAAC,CAACC,eAAe,CAAC,CAAC,CACnB/D,mBAAmB,CAAC6C,oBAAoB,CAAC,CAC3C,CAAE,CAAAS,QAAA,cAEFjD,IAAA,QAAKkD,GAAG,CAAE7B,MAAM,CAAGpC,MAAM,CAAGD,MAAO,CAACuE,KAAK,CAAC,MAAM,CAACH,GAAG,CAAC,OAAO,CAAE,CAAC,CAC5D,CAAC,CACL,CAAAzC,IAAI,SAAJA,IAAI,kBAAAH,eAAA,CAAJG,IAAI,CAAEgD,SAAS,UAAAnD,eAAA,iBAAfA,eAAA,CAAiBoD,GAAG,gBACnB1D,KAAA,QAAK4C,SAAS,CAAEjE,MAAM,CAAC,eAAe,CAAE,CAAAoE,QAAA,eACtCjD,IAAA,QAAAiD,QAAA,CAAK,KAAG,CAAK,CAAC,cACdjD,IAAA,QAAKkD,GAAG,CAAEnE,GAAI,CAACwE,KAAK,CAAC,MAAM,CAACH,GAAG,CAAC,cAAc,CAAE,CAAC,EAC9C,CACN,CACA,CAAAzC,IAAI,SAAJA,IAAI,kBAAAF,gBAAA,CAAJE,IAAI,CAAEgD,SAAS,UAAAlD,gBAAA,iBAAfA,gBAAA,CAAiBoD,IAAI,gBACpB7D,IAAA,QAAK8C,SAAS,CAAEjE,MAAM,CAAC,gBAAgB,CAAE,CAAAoE,QAAA,cACvCjD,IAAA,QAAAiD,QAAA,CAAK,UAAQ,CAAK,CAAC,CAChB,CACN,EACE,CAAC,cACN/C,KAAA,QAAK4C,SAAS,CAAEjE,MAAM,CAAC,aAAa,CAAE,CAAAoE,QAAA,eACpCjD,IAAA,QAAKqD,KAAK,CAAE,CAAES,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,CAAEtC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoD,IAAI,CAAM,CAAC,cACrD/D,IAAA,QAAAiD,QAAA,CAAMvD,YAAY,CAAC,EAAAgB,iBAAA,CAAAC,IAAI,CAACqD,WAAW,UAAAtD,iBAAA,iBAAhBA,iBAAA,CAAkBuD,EAAE,GAAItD,IAAI,CAACqD,WAAW,CAAE,EAAE,CAAC,CAAM,CAAC,cACvE9D,KAAA,QAAKmD,KAAK,CAAE,CAAES,UAAU,CAAE,MAAO,CAAE,CAAAb,QAAA,EAAC,KAAG,CAACtC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEuD,KAAK,EAAM,CAAC,EACvD,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}